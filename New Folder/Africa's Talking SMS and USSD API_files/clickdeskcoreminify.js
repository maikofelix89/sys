var CD_Live_Chat;var CLICKDESK_Live_Chat;var cd_proactive_message;var IS_CD_SSL=false;if(CLICKDESK_SERVER_PROTOCOL=="https://"){IS_CD_SSL=true}var cd_visitor_closed=false;var JSON=JSON||{};JSON.stringify=JSON.stringify||function(e){var d=typeof(e);if(d!="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(d=="string"){b='"'+b+'"'}else{if(d=="object"&&b!==null){b=JSON.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}return(a?"[":"{")+String(c)+(a?"]":"}")}};JSON.parse=JSON.parse||function(str){if(str===""){str='""'}eval("var p="+str+";");return p};function addlivilyEvent(e,b,d){try{var a=document.getElementById(e);if(a.addEventListener){a.addEventListener(b,function(f){if(d!==undefined&&d!=null){d(f)}},true)}else{a.attachEvent("on"+b,function(f){if(d!==undefined&&d!=null){d(f)}},true)}}catch(c){clickdeskLog("addEvent ="+c)}}function clickdeskAttachEvent(b,a,f){try{try{if(jQuery!==undefined){jQuery(b).unbind().bind(a,function(g){if(f!==undefined&&f!=null){f(g)}})}}catch(d){if(IS_MOOTOOLS_PRESENT){$$(b).addEvent(a,function(g){if(f!==undefined&&f!=null){f(g)}})}else{snack.wrap(b).attach(a,function(g){if(f!==undefined&&f!=null){f(g)}})}}}catch(c){clickdeskLog("attachEvent ="+c)}}function constructSnackRequest(b,a){var c={url:a,key:"callback",data:b};return c}function createDOMElement(a,d,c){var b;if(a!==undefined&&a!=null){b=document.createElement(a)}if(d!==undefined&&d!=null){b.setAttribute("id",d)}if(c!==undefined&&c!=null){b.className=c}return b}function removeElement(e,d){try{var b=document.getElementById(e);if(b!=null&&b!==undefined){for(var a=0;a<b.childNodes.length;a++){if(b.childNodes[a].className==d){b.childNodes[a].parentNode.removeChild(b.childNodes[a])}}}}catch(c){clickdeskLog("removeElement = "+c)}}function hasClass(b,a){var c;if(b.charAt("0")=="#"){c=clickdeskElementWrap(b)}else{c=clickdeskElementWrap("."+b)}var d=false;snack.each(c,function(f){var e=new RegExp("(^| )"+a+"( |$)");if(e.test(f.className)){d=true}});return d}function clickdeskElementWrap(a){try{try{if(jQuery!==undefined){return jQuery(a)}}catch(c){if(IS_MOOTOOLS_PRESENT){return $$(a)}else{return snack.wrap(a)}}}catch(b){clickdeskLog("clickdeskWrap = "+b)}}function nodeValid(b){var a=document.getElementById(b);if(a!=undefined){return true}else{return false}}function isValidElement(a){if(a!=null&&a!==undefined){return true}else{return false}}function setElementStyleByID(b,a){try{var d=document.getElementById(b);setElementStyleByObject(d,a)}catch(c){clickdeskLog("setStyle = "+c)}}function setElementStyleByObject(d,a){try{var e=d;if(e!==undefined&&e!=null){for(var c in a){e.style[c]=a[c]}}}catch(b){clickdeskLog("setStyle = "+b)}}if(cd_ie_browser_version>5){document.onfocusin=CLICKDESK_onFocus}else{window.onfocus=CLICKDESK_onFocus}var blinkTimer;var originalTitle=document.title;function CLICKDESK_onFocus(){document.title=originalTitle;if(blinkTimer!==undefined){clearTimeout(blinkTimer)}}function blinkTitle(b,a){blinkingTitle(a,b,true)}function blinkingTitle(c,b,a){if(a){document.title=b}else{document.title=originalTitle;c--;clearTimeout(blinkTimer)}if(c>0){blinkTimer=setTimeout("blinkingTitle("+c+", '"+b+"', "+!a+")",800)}}CD_Live_Chat={show:function(a){CLICKDESK_attempt(function(){return CLICKDESK_show(a)})},close:function(a){CLICKDESK_attempt(function(){return CLICKDESK_close(a)})},minimize:function(a){CLICKDESK_attempt(function(){return CLICKDESK_minimize(a)})},popout:function(a){CLICKDESK_attempt(function(){return CLICKDESK_popout(a)})},stopPropogation:function(a){CLICKDESK_attempt(function(){return CLICKDESK_stopEvent(a)})}};function CLICKDESK_attempt(a){try{return a()}catch(b){clickdeskLog("LiveChat Error: ",b)}}function CLICKDESK_show(a){if(hasClass("clickdesk_b","loaded")){showClickDeskLiveChatPopup()}return CLICKDESK_cancelEvent(a)}function CLICKDESK_close(a){CLICKDESK_AGENT_NEW_MESSAGE=false;cd_visitor_closed=true;livilySlideDOWN(document.getElementById("clickdesk_popup").offsetHeight,livilyHide);try{clickdeskElementWrap(".clickdesk_b").removeClass("min");CLICKDESK_createCookie("active_popup","",-1);deleteSession()}catch(b){clickdeskLog("close"+b)}return CLICKDESK_cancelEvent(a)}function showClickDeskLiveChatPopup(){cd_visitor_closed=false;if(hasClass("clickdesk_b","min")){hideBubble();setElementStyleByID("clickdesk_container",{display:"block"});setElementStyleByID("clickdesk_popup",{bottom:"0px"})}else{document.getElementById("clickdesk_session").innerHTML="";checkSession()}}function CLICKDESK_minimize(a){CLICKDESK_AGENT_NEW_MESSAGE=false;livilySlideDOWN(document.getElementById("clickdesk_popup").offsetHeight,livilyHide);try{clickdeskElementWrap(".clickdesk_b").addClass("min");CLICKDESK_createCookie("active_popup","",-1)}catch(b){clickdeskLog("minimize"+b)}return CLICKDESK_cancelEvent(a)}function CLICKDESK_popout(evt){var serverURL="http://localhost:8888/clickdeskpopoutchat.jsp?widget_id="+CLICKDESK_WIDGET_ID+"&host="+window.location.hostname;var sessionJSON=getActiveSession();if(sessionJSON){clickdeskLog(sessionJSON);var sessionId2=eval("sessionJSON."+SESSION_ID);var visitor_token=eval("sessionJSON.visitor_token");var channel=getPrefs(CHANNEL_ID);serverURL=serverURL+"&cdsession_id="+encodeURIComponent(sessionId2)+"&channel="+encodeURIComponent(channel)+"&visitor="+(visitor_token)}var CLICKDESK_PopoutWindow=window.open(serverURL,"clickdesk_popout_window","width=370,height=450");CLICKDESK_PopoutWindow.focus();return CLICKDESK_cancelEvent(evt)}function CLICKDESK_cancelEvent(b){var a=b||window.event||{};a.cancelBubble=true;a.returnValue=false;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return false}function CLICKDESK_stopEvent(b){var a=b||window.event||{};if(a.keyCode==13){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}return false}var proactiveMessage;function livilySlideUP(a,c){if(cd_ie_browser_version>5){c();return}var a=parseInt(a);var b=parseInt(document.getElementById("clickdesk_popup").style.bottom);if(parseInt(a)>0&&b<0){a=a-20;var b=parseInt(document.getElementById("clickdesk_popup").style.bottom);document.getElementById("clickdesk_popup").style.bottom=(b+20)+"px";setTimeout("livilySlideUP("+a+","+c+")",20)}else{if(c!==undefined){c()}}}function livilySlideDOWN(a,c){if(CLICKDESK_AGENT_NEW_MESSAGE){return}if(cd_ie_browser_version>5){c();return}var a=parseInt(a);if(a>0){a=a-20;var b=parseInt(document.getElementById("clickdesk_popup").style.bottom);document.getElementById("clickdesk_popup").style.bottom=(b-20)+"px";setTimeout("livilySlideDOWN("+a+","+c+")",20)}else{if(c!==undefined){c()}}}function livilyHide(){setElementStyleByID("clickdesk_container",{display:"none"});enableClickDeskBubble();showClickDeskButton();setElementStyleByID("livilyChatLink",{display:"inline"})}function livilyShow(){setElementStyleByID("clickdesk_container",{display:"block"});if(document.getElementById("ClickdeskprechatForm").style.display=="block"){try{clickdeskElementWrap("#cd_prechat_msg")[0].focus();clickdeskElementWrap("#cd_prechat_msg")[0].blur();clickdeskElementWrap("#cd_prechat_email")[0].focus();clickdeskElementWrap("#cd_prechat_email")[0].blur();clickdeskElementWrap("#cd_prechat_name")[0].focus();clickdeskElementWrap("#cd_prechat_name")[0].blur();if(document.getElementById("cd_prechat_custom")!==undefined&&document.getElementById("cd_prechat_custom")!=null){clickdeskElementWrap("#cd_prechat_custom")[0].focus();clickdeskElementWrap("#cd_prechat_custom")[0].blur()}}catch(a){}}else{if(document.getElementById("ClickdeskofflineForm").style.display=="block"){try{clickdeskElementWrap("#cd_offline_msg")[0].focus();clickdeskElementWrap("#cd_offline_msg")[0].blur();clickdeskElementWrap("#cd_offline_email")[0].focus();clickdeskElementWrap("#cd_offline_email")[0].blur();clickdeskElementWrap("#cd_offline_name")[0].focus();clickdeskElementWrap("#cd_offline_name")[0].blur()}catch(a){}}}}function loadServerJSFiles(c){var a=getActiveSession();var b=getPrefs(CD_CLIENT_DETAILS);if(IS_CD_SSL||a||b){loadServerMinifyJSFiles(c)}else{loadServerMinifyJSFiles(c)}}function loadServerMinifyJSFiles(a){loadJS(CLICKDESK_GOOGLE_API_JS,function(){enableClickDeskBubble();showClickDeskButton();createClickDeskPopup();cdCheckDoctypeInIE()})}function createClickDeskContainer(){var b=createDOMElement("div","clickdesk_container","clickdesk_chat");b.innerHTML='<div id="clickdesk_frame_container"><div id="clickdeskchat_container" style="z-index:2147483638;"><div id="clickdesk_popup" class="ClickDesk" style="bottom:0px;position:fixed;z-index:2147483638;"></div></div></div>';try{if(CLICKDESK_NO_SCRIPT_PAGE!==undefined){document.getElementById("wrapperDIV").appendChild(b)}}catch(a){document.body.appendChild(b)}setElementStyleByID("clickdesk_container",{display:"none"});var c=widgetPrefsJSON.bubble.alignment;if(c!==undefined&&c!=null){if(c=="bottom_right"||c=="top_right"){setElementStyleByID("clickdesk_popup",{"margin-right":"10px",right:"0px"})}else{if(c=="bottom_left"||c=="top_left"){setElementStyleByID("clickdesk_popup",{"margin-left":"10px",left:"0px"})}}}}function applyLivilySocialLinks(){if(CLICKDESK_TWITTER_URL!==undefined&&CLICKDESK_TWITTER_URL!=null){if(widgetPrefsJSON.social_networks.show_twitter=="yes"){document.getElementById("cd_twitter").parentNode.style.display="block"}}if(CLICKDESK_FACEBOOK_URL!==undefined&&CLICKDESK_FACEBOOK_URL!=null){if(widgetPrefsJSON.social_networks.show_facebook=="yes"){document.getElementById("cd_facebook").parentNode.style.display="block"}}}function addClickDeskBorder(){var a={borderLeft:"1px solid "+CLICKDESK_COLOR,borderRight:"1px solid "+CLICKDESK_COLOR,borderBottom:"1px solid "+CLICKDESK_COLOR};setElementStyleByID("prechatForm",a);setElementStyleByID("offlineForm",a);setElementStyleByID("clickdesk_footer",a);setElementStyleByID("livily_twitter",a);setElementStyleByID("clickdesk_footer_tabs",a);setElementStyleByID("clickdeskchat_social_template",a);setElementStyleByID("clickdesk_footer_tabs",{backgroundColor:CLICKDESK_COLOR});setElementStyleByID("clickdesk_popup",{border:"1px solid "+CLICKDESK_COLOR});setElementStyleByID("clickdesk_header",{backgroundColor:CLICKDESK_COLOR})}function cdCheckDoctypeInIE(){if(cd_ie_browser_version>5){if(cd_ie_browser_version==6||!CDSupportsFixed()){var b=widgetPrefsJSON.bubble.alignment;if(b!==undefined&&b!=null){if(b=="bottom_right"){clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-right");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-right")}else{if(b=="bottom_left"){clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-left");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-left")}else{if(b=="top_right"){clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-top");clickdeskElementWrap("#clickdesk_tool").addClass("clickdesk-fixed-right");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-right")}else{if(b=="top_left"){clickdeskElementWrap("#clickdesk_bub").addClass("clickdesk-fixed-top");clickdeskElementWrap("#clickdesk_tool").addClass("clickdesk-fixed-left");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-bottom");clickdeskElementWrap("#clickdesk_container").addClass("clickdesk-fixed-left")}}}}setElementStyleByID("clickdesk_bub",{width:"260px",maxWidth:"280px"});var a=widgetPrefsJSON.button.alignment;clickdeskElementWrap("#clickdesk_tool").addClass("clickdesk-fixed-"+a);setElementStyleByID("clickdesk_etv_submit",{width:"100px",overflow:"hidden"});setElementStyleByID("clickdesk_etv_cancel",{width:"100px",overflow:"hidden"})}}}}function CDSupportsFixed(){var a=document.createElement("div");a.id="testingPositionFixed";a.style.position="fixed";a.style.top="0px";a.style.right="0px";document.body.appendChild(a);var b=1;if(typeof a.offsetTop=="number"&&a.offsetTop!=null&&a.offsetTop!="undefined"){b=parseInt(a.offsetTop)}if(b==0){return true}return false}function removeDomByClassName(c){var b=clickdeskElementWrap("."+c);for(var a=0;a<b.length;a++){document.body.removeChild(b[a])}}function checkActiveTab(){if(typeof(localStorage)=="undefined"){try{if(random==readSessionCookie("tabSelect")){var a=setTimeout("checkActiveTab()",4000)}else{removeDomByClassName("clickdesk_b");document.body.removeChild(document.getElementById("clickdesk_container"))}}catch(b){}}else{try{if(random==localStorage.getItem("tabSelect")){var a=setTimeout("checkActiveTab()",4000)}else{removeDomByClassName("clickdesk_b");document.body.removeChild(document.getElementById("clickdesk_container"))}}catch(c){try{if(c==QUOTA_EXCEEDED_ERR){clickdeskLog("Quota exceeded!")}}catch(d){clickdeskLog("e1 = "+d)}}}}CLICKDESK_Live_Chat={setName:function(a){CLICKDESK_attempt(function(){return CLICKDESK_setName(a)})},setEmail:function(a){CLICKDESK_attempt(function(){return CLICKDESK_setEmail(a)})},setMessage:function(a){CLICKDESK_attempt(function(){return CLICKDESK_setMessage(a)})},setPrefs:function(a){CLICKDESK_attempt(function(){return CLICKDESK_setPrefs(a)})},onStatus:function(a){CLICKDESK_attempt(function(){return CLICKDESK_onStatus(a)})},setBubbleText:function(a){CLICKDESK_attempt(function(){return CLICKDESK_setBubbleText(a)})}};function CLICKDESK_onStatus(c){var a={};a.widget_id=CLICKDESK_WIDGET_ID;a.command="online_status";var b=constructSnackRequest(a,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(b,function(d){clickdeskLog(d);var e="";if(d.status=="success"){e=d.response.status}else{e=d.errormssg}if(c!==undefined){c(e)}})}function CLICKDESK_setBubbleText(a){try{clickdeskElementWrap("#clickdesk_notification_text")[0].innerHTML='<img src="'+glcpath+'images/icon-chat.png" align="absmiddle" style="display:inline-block;" /> '+a+'<span class="cd-max"></span>';return false}catch(b){console.log("err in API = "+b)}}function CLICKDESK_setName(a){try{if(OFFLINE_FIRSTFIELDEMAILVSTEXT=="text"){document.getElementById("cd_offline_name").value=a;document.getElementById("cd_offline_name").previousSibling.style.display="none"}if(OFFLINE_SECONDFIELDEMAILVSTEXT=="text"){document.getElementById("cd_offline_email").value=a;document.getElementById("cd_offline_email").previousSibling.style.display="none"}if(PRECHAT_FIRSTFIELDEMAILVSTEXT=="text"){document.getElementById("cd_prechat_name").value=a;document.getElementById("cd_prechat_name").previousSibling.style.display="none"}if(PRECHAT_SECONDFIELDEMAILVSTEXT=="text"){document.getElementById("cd_prechat_email").value=a;document.getElementById("cd_prechat_email").previousSibling.style.display="none"}CLICKDESK_createCookie("visitor_name",a);return CLICKDESK_cancelEvent(a)}catch(b){clickdeskLog("err in API = "+b)}}function CLICKDESK_setEmail(a){try{if(OFFLINE_FIRSTFIELDEMAILVSTEXT=="email"){document.getElementById("cd_offline_name").value=a;document.getElementById("cd_offline_name").previousSibling.style.display="none"}if(OFFLINE_SECONDFIELDEMAILVSTEXT=="email"){document.getElementById("cd_offline_email").value=a;document.getElementById("cd_offline_email").previousSibling.style.display="none"}if(PRECHAT_FIRSTFIELDEMAILVSTEXT=="email"){document.getElementById("cd_prechat_name").value=a;document.getElementById("cd_prechat_name").previousSibling.style.display="none"}if(PRECHAT_SECONDFIELDEMAILVSTEXT=="email"){document.getElementById("cd_prechat_email").value=a;document.getElementById("cd_prechat_email").previousSibling.style.display="none"}CLICKDESK_createCookie("visitor_email",a);return CLICKDESK_cancelEvent(a)}catch(b){clickdeskLog("err in API = "+b)}}function CLICKDESK_setMessage(a){try{document.getElementById("cd_prechat_msg").value=a;document.getElementById("cd_prechat_msg").previousSibling.style.display="none";document.getElementById("cd_offline_msg").value=a;document.getElementById("cd_offline_msg").previousSibling.style.display="none";return CLICKDESK_cancelEvent(a)}catch(b){clickdeskLog("err in API = "+b)}}function CLICKDESK_setPrefs(a){try{if(typeof(a)=="object"){for(key in a){if(key=="name"){CLICKDESK_Live_Chat.setName(a[key])}if(key=="email"){CLICKDESK_Live_Chat.setEmail(a[key])}if(key=="message"){CLICKDESK_Live_Chat.setMessage(a[key])}if(key=="onStatus"){CLICKDESK_Live_Chat.onStatus(a[key])}if(key=="bubbleText"){CLICKDESK_Live_Chat.setBubbleText(a[key])}}}return CLICKDESK_cancelEvent(a)}catch(b){console.log("err in API = "+b)}}function CLICKDESK_createCookie(c,d,e){c=CLICKDESK_WIDGET_ID+"-"+c;if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+escape(d)+a+"; path=/"}function cdloadCSS(b){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href",b);if(typeof a!="undefined"){document.getElementsByTagName("head")[0].appendChild(a)}}typeof Object.create!="function"&&(Object.create=function(d){function c(){}c.prototype=d;return new c}),!function(g){var f=g.snack={},k=0,j=Object.prototype.toString,h=Array.prototype.indexOf;f.extend=function(){if(arguments.length==1){return f.extend(f,arguments[0])}var b=arguments[0];for(var n,m=1,l=arguments.length;m<l;m++){for(n in arguments[m]){b[n]=arguments[m][n]}}return b},f.extend({v:"1.2.1",bind:function(e,d,l){return function(){return e.apply(d,l||arguments)}},punch:function(b,o,n,m){var l=b[o];b[o]=m?function(){l.apply(b,arguments);return n.apply(b,arguments)}:function(){var a=[].slice.call(arguments,0);a.unshift(f.bind(l,b));return n.apply(b,a)}},create:function(b,l){var e=Object.create(b);if(!l){return e}for(i in l){if(!l.hasOwnProperty(i)){continue}if(!b[i]||typeof l[i]!="function"){e[i]=l[i];continue}f.punch(e,i,l[i])}return e},id:function(){return ++k},each:function(m,l,r){if(m.length===void 0){for(var q in m){m.hasOwnProperty(q)&&l.call(r,m[q],q,m)}return m}for(var o=0,n=m.length;o<n;o++){l.call(r,m[o],o,m)}return m},parseJSON:function(a){if(typeof a=="string"){a=a.replace(/^\s+|\s+$/g,"");var l=/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""));if(!l){throw"Invalid JSON"}var e=g.JSON;return e&&e.parse?e.parse(a):(new Function("return "+a))()}},isArray:function(b){return b instanceof Array||j.call(b)=="[object Array]"},indexOf:h?function(d,c){return h.call(c,d)}:function(l,e){for(var n=0,m=e.length;n<m;n++){if(e[n]===l){return n}}return -1}})}(window),!function(f,e){var h={},g;f.wrap=function(a,k){typeof a=="string"&&(a=g(a,k)),a.length||(a=[a]);var j=Object.create(h),d=0,c=a.length;for(;d<c;d++){j[d]=a[d]}j.length=c,j.id=f.id();return j},f.extend(f.wrap,{define:function(a,c){if(typeof a!="string"){for(i in a){f.wrap.define(i,a[i])}}else{h[a]=c}},defineEngine:function(b){g=b}}),f.wrap.defineEngine(function(b,d){typeof d=="string"&&(d=e.querySelector(d));return(d||e).querySelectorAll(b)})}(snack,document),!function(A,z,y){function o(){try{s.doScroll("left")}catch(b){setTimeout(o,50);return}q("poll")}function q(a){if(a.type!="readystatechange"||y.readyState=="complete"){(a.type=="load"?z:y)[w](v+a.type,q,!1),!u&&(u=!0)&&A.each(r,function(b){b.apply(y)})}}var x=y.addEventListener?"addEventListener":"attachEvent",w=y.addEventListener?"removeEventListener":"detachEvent",v=y.addEventListener?"":"on",u=!1,t=!0,s=y.documentElement,r=[];A.extend({stopPropagation:function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},preventDefault:function(b){b.preventDefault?b.preventDefault():b.returnValue=!1}}),A.listener=function(a,d){a.delegate&&(a.capture=!0,_handler=d,d=function(h){var g=h.target||h.srcElement,b=typeof a.delegate=="string"?A.wrap(a.delegate,a.node):a.delegate(a.node);while(g&&A.indexOf(g,b)==-1){g=g.parentNode}g&&g!==this&&g!==y&&_handler.call(g,h,g)}),a.context&&(d=A.bind(d,a.context));var c={attach:function(){a.node[x](v+a.event,d,a.capture)},detach:function(){a.node[w](v+a.event,d,a.capture)},fire:function(){d.apply(a.node,arguments)}};c.attach();return c},A.ready=function(b){u?b.apply(y):r.push(b)};if(y.createEventObject&&s.doScroll){try{t=!z.frameElement}catch(n){}t&&o()}y[x](v+"DOMContentLoaded",q,!1),y[x](v+"readystatechange",q,!1),z[x](v+"load",q,!1)}(snack,window,document),!function(b){b.publisher=function(a){var d={};a=a||{},b.extend(a,{subscribe:function(c,l,k){var j={fn:l,ctxt:k||{}};d[c]||(d[c]=[]);var h={attach:function(){d[c].push(j)},detach:function(){d[c].splice(b.indexOf(l,d[c]),1)}};h.attach();return h},publish:function(c,e){if(!d[c]){return !1}b.each(d[c],function(f){f.fn.apply(f.ctxt,e||[])});return d[c].length}});return a},b.publisher(b)}(snack),!function(g,f,k){function h(){}g.JSONP=function(a,o){var n="jsonp"+g.id(),m=k.createElement("script"),l=!1;g.JSONP[n]=function(d){l=!1,delete g.JSONP[n],o(d)},typeof a.data=="object"&&(a.data=g.toQueryString(a.data));var c={send:function(){l=!0,m.src=a.url+"?"+a.key+"=snack.JSONP."+n+"&"+a.data,k.getElementsByTagName("head")[0].appendChild(m)},cancel:function(){l&&m.parentNode&&m.parentNode.removeChild(m),l=!1,g.JSONP[n]=function(){delete g.JSONP[n]}}};a.now!==!1&&c.send();return c},g.toQueryString=function(a,l){var e=[];g.each(a,function(c,n){l&&(n=l+"["+n+"]");var m;switch(g.isArray(c)){case"object":m=g.toQueryString(c,n);break;case"array":var d={};g.each(c,function(q,o){d[o]=q}),m=g.toQueryString(d,n);break;default:m=n+"="+encodeURIComponent(c)}c!==null&&e.push(m)});return e.join("&")};var j=function(){var l=function(){return new XMLHttpRequest},e=function(){return new ActiveXObject("MSXML2.XMLHTTP")},n=function(){return new ActiveXObject("Microsoft.XMLHTTP")};try{l();return l}catch(m){try{e();return e}catch(m){n();return n}}}();g.request=function(a,l){if(!(this instanceof g.request)){return new g.request(a,l)}var d=this;d.options=g.extend({},d.options,a),d.callback=l,d.xhr=new j,d.headers=d.options.headers,d.options.now!==!1&&d.send()},g.request.prototype={options:{exception:h,url:"",data:"",method:"get",now:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,emulation:!0,urlEncoded:!0,encoding:"utf-8"},onStateChange:function(){var l=this,e=l.xhr;if(e.readyState==4&&!!l.running){l.running=!1,l.status=0;try{var o=e.status;l.status=o==1223?204:o}catch(n){}e.onreadystatechange=h;var m=l.status>=200&&l.status<300?[!1,l.xhr.responseText||"",l.xhr.responseXML]:[l.status];l.callback.apply(l,m)}},setHeader:function(d,c){this.headers[d]=c;return this},getHeader:function(d){try{return this.xhr.getResponseHeader(d)}catch(c){return null}},send:function(){var v=this,u=v.options;if(v.running){return v}v.running=!0;var t=u.data||"",s=String(u.url),r=u.method.toLowerCase();typeof t!="string"&&(t=g.toQueryString(t));if(u.emulation&&g.indexOf(r,["get","post"])<0){var q="_method="+r;t=t?q+"&"+t:q,r="post"}if(u.urlEncoded&&g.indexOf(r,["post","put"])>-1){var o=u.encoding?"; charset="+u.encoding:"";v.headers["Content-type"]="application/x-www-form-urlencoded"+o}s||(s=k.location.pathname);var n=s.lastIndexOf("/");n>-1&&(n=s.indexOf("#"))>-1&&(s=s.substr(0,n)),t&&r=="get"&&(s+=(s.indexOf("?")>-1?"&":"?")+t,t=null);var c=v.xhr;c.open(r.toUpperCase(),s,open.async,u.user,u.password),u.user&&"withCredentials" in c&&(c.withCredentials=!0),c.onreadystatechange=g.bind(v.onStateChange,v);for(i in v.headers){try{c.setRequestHeader(i,v.headers[i])}catch(a){u.exception.apply(v,[i,v.headers[i]])}}c.send(t),u.async||v.onStateChange();return v},cancel:function(){var d=this;if(!d.running){return d}d.running=!1;var c=d.xhr;c.abort(),c.onreadystatechange=h,d.xhr=new j;return d}}}(snack,window,document),!function(f,e){function g(a,m,l,k){var j=a.data(l);j&&f.each(j,function(b){b[m].apply(a,k)});return a}function h(b){return b.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}f.wrap.define({data:function(){var b={};return function(a,k){var j=b[this.id];j||(j=b[this.id]={});if(k===void 1){return j[a]}return j[a]=k}}(),each:function(a,d){return f.each(this,a,d)},addClass:function(b){return this.each(function(a){h(a.className).indexOf(b)>-1||(a.className=h(a.className+" "+b))})},removeClass:function(b){return this.each(function(a){a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(?:\\s|$)"),"$1")})},attach:function(a,m,l){var k=a.split("."),j=[];k[1]&&(j=this.data(k[1])||[]),this.each(function(c){var d={node:c,event:k[0]};l&&(d.delegate=l),j.push(f.listener(d,m))}),k[1]&&this.data(k[1],j);return this},detach:function(b){g(this,"detach",b,null,!0),this.data(b,null);return this},fire:function(d,c){return g(this,"fire",d,c)},delegate:function(j,d,k){return this.attach(j,k,d)}})}(snack,document),!function(aY,aX){function ab(f){var e=[],h,g;label:for(h=0;h<f.length;h++){for(g=0;g<e.length;g++){if(e[g]==f[h]){continue label}}e[e.length]=f[h]}return e}function ac(b,f){var e=typeof f=="string"?ac(f)[0]:f||aX;if(!e||!b){return[]}if(aR=ae(b,f,ac)){return aR}if(aX.getElementsByClassName&&(aR=b.match(aA))){return ar(e.getElementsByClassName(aR[1]))}return ar(e.querySelectorAll(b))}function ad(b){return b===window||b&&b.nodeType&&b.nodeType.toString().match(/[19]/)}function ae(b,h,g){var f=typeof h=="string"?g(h)[0]:h||aX;if(ad(b)){return !h||ad(f)&&af(b,f)?[b]:[]}if(b&&typeof b=="object"&&isFinite(b.length)){return ar(b)}if(aR=b.match(aB)){return(aM=aX.getElementById(aR[1]))?[aM]:[]}if(aR=b.match(az)){return ar(f.getElementsByTagName(aR[1]))}return !1}function ag(f){var e=[],m=[],l,k,j=am.g(f)||am.s(f,f.split(aw));j=j.slice(0);if(!j.length){return e}e=aj(j);if(!j.length){return e}for(aU=0,k=e.length,aT=0;aU<k;aU++){aL=e[aU],aP=aL;for(l=j.length;l--;){az:while(aP!==ax&&(aP=aP.parentNode)){if(aJ=ak.apply(aP,al(j[l]))){break az}}}aJ&&(m[aT++]=aL)}return m}function ah(e,d,f){switch(e){case"=":return d==f;case"^=":return d.match(an.g("^="+f)||an.s("^="+f,new RegExp("^"+ai(f))));case"$=":return d.match(an.g("$="+f)||an.s("$="+f,new RegExp(ai(f)+"$")));case"*=":return d.match(an.g(f)||an.s(f,new RegExp(ai(f))));case"~=":return d.match(an.g("~="+f)||an.s("~="+f,new RegExp("(?:^|\\s+)"+ai(f)+"(?:\\s+|$)")));case"|=":return d.match(an.g("|="+f)||an.s("|="+f,new RegExp("^"+ai(f)+"(-|$)")))}return !1}function ai(b){return ao.g(b)||ao.s(b,b.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1"))}function aj(s){var r=[],q=s.pop(),o=al(q),n=o[1]||"*",m,l,h,b=s.length&&(aR=s[0].match(aB))?aX.getElementById(aR[1]):aX;if(!b){return r}h=b.getElementsByTagName(n);for(m=0,l=h.length;m<l;m++){aM=h[m],(aH=ak.apply(aM,o))&&r.push(aH)}return r}function ak(v,u,t,s,r,q,o){var n,m,d;if(u&&this.tagName.toLowerCase()!==u){return !1}if(t&&(n=t.match(aD))&&n[1]!==this.id){return !1}if(t&&(aI=t.match(aC))){for(aV=aI.length;aV--;){m=aI[aV].slice(1);if(!(ap.g(m)||ap.s(m,new RegExp("(^|\\s+)"+m+"(\\s+|$)"))).test(this.className)){return !1}}}if(s&&!o){aQ=this.attributes;for(d in aQ){if(Object.prototype.hasOwnProperty.call(aQ,d)&&(aQ[d].name||d)==r){return this}}}if(s&&!ah(q,this.getAttribute(r)||"",o)){return !1}return this}function al(b){return b.match(at)}function ar(b){aO=[];for(aV=0,aK=b.length;aV<aK;aV++){aO[aV]=b[aV]}return aO}var aW,aV,aU,aT,aS,aR,aQ,aP,aO,aN,aM,aL,aK,aJ,aI,aH,aG,aF,aE,aD=/#([\w\-]+)/,aC=/\.[\w\-]+/g,aB=/^#([\w\-]+$)/,aA=/^\.([\w\-]+)$/,az=/^([\w\-]+)$/,ay=/^([\w]+)?\.([\w\-]+)$/,ax=aX.documentElement,aw=/\s(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\])/,av=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,au=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,at=new RegExp(av.source+"("+au.source+")?"),aq=function(){this.c={}};aq.prototype={g:function(b){return this.c[b]||undefined},s:function(d,c){this.c[d]=c;return c}};var ap=new aq,ao=new aq,an=new aq,am=new aq,af="compareDocumentPosition" in ax?function(d,c){return(c.compareDocumentPosition(d)&16)==16}:"contains" in ax?function(d,c){return c!==d&&c.contains(d)}:function(d,c){while(d=d.parentNode){if(d===c){return 1}}return 0},aa=function(){if(aX.querySelector&&aX.querySelectorAll){return ac}return function(s,r){var q=typeof r=="string"?aa(r)[0]:r||aX;if(!q||!s){return[]}var o,n,k=[],h=[],e;if(aR=ae(s,r,aa)){return aR}if(aR=s.match(ay)){aG=q.getElementsByTagName(aR[1]||"*"),aO=ap.g(aR[2])||ap.s(aR[2],new RegExp("(^|\\s+)"+aR[2]+"(\\s+|$)"));for(o=0,n=aG.length,aU=0;o<n;o++){aO.test(aG[o].className)&&(k[aU++]=aG[o])}return k}for(o=0,aG=s.split(","),n=aG.length;o<n;o++){h[o]=ag(aG[o])}for(o=0,n=h.length;o<n&&(aE=h[o]);o++){var b=aE;if(q!==aX){b=[];for(aU=0,aR=aE.length;aU<aR&&(e=aE[aU]);aU++){af(e,q)&&b.push(e)}}k=k.concat(b)}return ab(k)}}();aa.uniq=ab;var Z=aY.qwery;aa.noConflict=function(){aY.qwery=Z;return this},aY.qwery=aa}(this,document),snack.qwery=qwery.noConflict(),snack.wrap.defineEngine(function(d,c){return snack.qwery(d,c)});function showBubble(a,b){if(a!==undefined){constructBubble(a,b)}}function constructBubble(b,f){if(f=="online"){textToShow=b.online_text;if(textToShow.indexOf("online")==0||textToShow.indexOf("Online")==0){textToShow=textToShow.substring(7)}}else{textToShow=b.offline_text;if(textToShow.indexOf("offline")==0||textToShow.indexOf("Offline")==0){textToShow=textToShow.substring(8)}}if(textToShow.indexOf("-")==0){textToShow=textToShow.substring(textToShow.indexOf("-")+1)}var a=document.createElement("div");a.setAttribute("id","clickdesk_bub");a.className="clickdesk_b";a.style.display="none";a.innerHTML='<div class="ClickDesktopnotification ClickDeskclearfix" id="cd-ClickDesktop" style="background-color:'+CLICKDESK_COLOR+'; height:auto !important;padding-top:0px !important;"><div class="ClickDeskcontrols" style="top:7px !important;right:2px !important;"><a href="#" class="cd-max" title="Maximize"></a></div><div class="ClickDeskStatus'+f+'" style="font-size:11px !important;">'+f+'</div><div class="ClickDeskNotice" id="clickdesk_notification_text" style="position:static !important;padding-right: 19px !important;padding-top:5px !important;padding-bottom:4px !important;line-height:20px !important;height:auto !important;"><img src="'+CLICKDESK_STATIC_AMAZON_IMAGE_URL+'/icons/icon-chat.png" align="absmiddle" style="display:inline-block;" /> '+textToShow+'<span class="cd-max"></span></div></div>';var j=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/icons/download.png";var d={backgroundImage:'url("'+j+'")',backgroundRepeat:"repeat"};var c=b.alignment;if(c=="bottom_right"){d.bottom="0px";d.right="6px"}else{if(c=="bottom_left"){d.bottom="0px";d.left="6px"}else{if(c=="top_right"){d.top="0px";d.right="6px"}else{if(c=="top_left"){d.top="0px";d.left="6px"}}}}d.enable=b.bubble_enabled;CLICKDESK_HIDE_OFFLINE=b.hide_offline;try{if(document.body!=null){document.body.appendChild(a)}}catch(g){clickdeskLog("document.body "+g)}setElementStyleByID("clickdesk_bub",d);if(c=="top_right"||c=="top_left"){setElementStyleByID("clickdesk_bub",{borderRadius:"0px 0px 4px 4px",MozBorderRadius:"0px 0px 4px 4px",WebkitBorderRadius:"0px 0px 4px 4px",KhtmlBorderRadius:"0px 0px 4px 4px",borderStyle:"none solid solid solid"});setElementStyleByID("cd-ClickDesktop",{borderRadius:"0px 0px 4px 4px",MozBorderRadius:"0px 0px 4px 4px",WebkitBorderRadius:"0px 0px 4px 4px",KhtmlBorderRadius:"0px 0px 4px 4px"})}else{setElementStyleByID("clickdesk_bub",{borderRadius:"4px 4px 0px 0px",MozBorderRadius:"4px 4px 0px 0px",WebkitBorderRadius:"4px 4px 0px 0px",KhtmlBorderRadius:"4px 4px 0px 0px",borderStyle:"solid solid none solid"});setElementStyleByID("cd-ClickDesktop",{borderRadius:"4px 4px 0px 0px",MozBorderRadius:"4px 4px 0px 0px",WebkitBorderRadius:"4px 4px 0px 0px",KhtmlBorderRadius:"4px 4px 0px 0px"})}random=Math.floor(Math.random()*100);if(typeof(localStorage)=="undefined"){CLICKDESK_createCookie("tabSelect",random)}else{try{localStorage.setItem("tabSelect",random)}catch(h){if(h==QUOTA_EXCEEDED_ERR){clickdeskLog("Quota exceeded!")}}}checkActiveTab()}function enableClickDeskBubble(){if(widgetPrefsJSON.bubble.bubble_enabled=="yes"){if(CLICKDESK_HIDE_OFFLINE=="yes"&&CLICKDESK_AGENT_STATUS=="offline"){setElementStyleByID("clickdesk_bub",{display:"none"})}else{setElementStyleByID("clickdesk_bub",{display:"block"})}}setElementStyleByID("livilyChatLink",{display:"inline"})}var cd_enable_button;function showButton(a){if(a!==undefined){constructButton(a)}}function constructButton(f){var h=f.position;var m=f.alignment;var d=f.color;cd_enable_button=f.button_enabled;var e=f.button_type;var a=document.createElement("div");a.setAttribute("id","clickdesk_tool");if(CLICKDESK_AGENT_STATUS=="online"){a.className="ClickDesk ClickDeskChatButton clickdesk_b"}else{a.className="ClickDesk ClickDeskChatButtonOffline clickdesk_b"}a.style.display="none";a.onmouseover=function(){buttonover(a)};a.onmouseout=function(){buttonout(a)};if(e===undefined||e=="type2"){if(m=="right"||m=="left"){var l=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/live-chat-"+m+"-type2.png"}else{l=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/live-chat-normal-type2.png"}a.innerHTML="<img src="+l+" />";var b={backgroundColor:CLICKDESK_COLOR};var k={height:"33px",width:"94px",left:h};var q={height:"94px",top:h};if(m=="right"){b.right="-2px"}else{if(m=="left"){b.left="-2px"}else{if(m=="bottom"){b.bottom="-2px"}else{b.top="-2px"}}}try{if(document.body!=null){document.body.appendChild(a)}}catch(c){clickdeskLog("button "+c)}if(m=="right"||m=="left"){setElementStyleByID("clickdesk_tool",q);if(m=="right"){setElementStyleByID("clickdesk_tool",{borderRadius:"6px 0px 0px 6px",MozBorderRadius:"6px 0px 0px 6px",WebkitBorderRadius:"6px 0px 0px 6px",KhtmlBorderRadius:"6px 0px 0px 6px"})}}else{setElementStyleByID("clickdesk_tool",k);clickdeskElementWrap("#clickdesk_tool img")[0].style.margin="11px 10px 14px 14px";if(m=="top"){setElementStyleByID("clickdesk_tool",{borderRadius:"0px 0px 6px 6px",MozBorderRadius:"0px 0px 6px 6px",WebkitBorderRadius:"0px 0px 6px 6px",KhtmlBorderRadius:"0px 0px 6px 6px"})}else{setElementStyleByID("clickdesk_tool",{borderRadius:"6px 6px 0px 0px",MozBorderRadius:"6px 6px 0px 0px",WebkitBorderRadius:"6px 6px 0px 0px",KhtmlBorderRadius:"6px 6px 0px 0px"})}}setElementStyleByID("clickdesk_tool",b)}else{var r;if(m=="right"||m=="left"){r=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/live-"+m+"-"+e+".png"}else{r=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/live-normal-"+e+".png"}var o={backgroundColor:CLICKDESK_COLOR,backgroundImage:'url("'+r+'")',border:"1px solid #333",display:"none",position:"fixed",zIndex:"2147483638",cursor:"pointer"};var g={height:"34px",width:"100px",left:h};var j={height:"100px",width:"40px",top:h};if(m==="right"){o.right="-6px"}else{if(m==="left"){o.left="-6px"}else{if(m==="bottom"){o.bottom="-6px"}else{o.top="-6px"}}}try{if(document.body!=null){document.body.appendChild(a)}}catch(n){clickdeskLog("button "+n)}if(m=="right"||m=="left"){setElementStyleByID("clickdesk_tool",j)}else{setElementStyleByID("clickdesk_tool",g)}if(m=="top"){setElementStyleByID("clickdesk_tool",{borderRadius:"0px 0px 4px 4px",MozBorderRadius:"0px 0px 4px 4px",WebkitBorderRadius:"0px 0px 4px 4px",KhtmlBorderRadius:"0px 0px 4px 4px"})}else{if(m=="left"){setElementStyleByID("clickdesk_tool",{borderRadius:"0px 4px 4px 0px",MozBorderRadius:"0px 4px 4px 0px",WebkitBorderRadius:"0px 4px 4px 0px",KhtmlBorderRadius:"0px 4px 4px 0px"})}else{if(m=="right"){setElementStyleByID("clickdesk_tool",{borderRadius:"4px 0px 0px 4px",MozBorderRadius:"4px 0px 0px 4px",WebkitBorderRadius:"4px 0px 0px 4px",KhtmlBorderRadius:"4px 0px 0px 4px"})}else{setElementStyleByID("clickdesk_tool",{borderRadius:"4px 4px 0px 0px",MozBorderRadius:"4px 4px 0px 0px",WebkitBorderRadius:"4px 4px 0px 0px",KhtmlBorderRadius:"4px 4px 0px 0px"})}}}setElementStyleByID("clickdesk_tool",o)}}function showClickDeskButton(){if(widgetPrefsJSON.button.button_enabled=="yes"){if(cd_enable_button=="no"&&CLICKDESK_AGENT_STATUS=="offline"){setElementStyleByID("clickdesk_tool",{display:"none"})}else{setElementStyleByID("clickdesk_tool",{display:"block"})}}setElementStyleByID("livilyChatLink",{display:"inline"})}function buttonover(b){var a=widgetPrefsJSON.button.alignment;switch(a){case"left":b.style.left=(parseInt(b.style.left)+1)+"px";break;case"right":b.style.right=(parseInt(b.style.right)+1)+"px";break;case"top":b.style.top=(parseInt(b.style.top)+1)+"px";break;case"bottom":b.style.bottom=(parseInt(b.style.bottom)+1)+"px";break;default:clickdeskLog("default");break}}function buttonout(b){var a=widgetPrefsJSON.button.alignment;switch(a){case"left":b.style.left=(parseInt(b.style.left)-1)+"px";break;case"right":b.style.right=(parseInt(b.style.right)-1)+"px";break;case"top":b.style.top=(parseInt(b.style.top)-1)+"px";break;case"bottom":b.style.bottom=(parseInt(b.style.bottom)-1)+"px";break;default:clickdeskLog("default2");break}}cdloadCSS(glcpath+"css/clickdesk-toolbar.css");var CLICKDESK_SNACK=snack;var IS_PROACTIVE;var CLICKDESK_ONLINEFORM_CUSTOM_FIELD;var prechatCustom;function createClickDeskPopup(E){var o=document.getElementById("clickdesk_popup");var q=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/chat-logo.png";var f="http://www.clickdesk.com/clickdesk-confirm.jsp?me="+CLICKDESK_USER_ID+"";var S=true;var r=widgetPrefsJSON.white_label_image_prefs;if(r!==undefined||r!=null){q=r.white_label_image_url;var h=r.white_label_image_url_link;if(h!==undefined){f=h}var D=r.whitelabel_image_option;if(D!==undefined&&D!=null){if(D=="whitelabel_default"){q=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/chat-logo.png";f="http://www.clickdesk.com/clickdesk-confirm.jsp?me="+CLICKDESK_USER_ID+""}else{if(D=="whitelabel_hide"){S=false}}}}q=(q);var F="";var s="";var G="";var P="";try{s=CLICKDESK_SERVER_PROTOCOL+"twitter.com/"+CLICKDESK_TWITTER_URL.substring(CLICKDESK_TWITTER_URL.lastIndexOf("/")+1);F="https://twitter.com/share?url="+s;G="https://twitter.com/url="+s}catch(t){}if(CLICKDESK_COMPANY_LOGO===undefined||CLICKDESK_COMPANY_LOGO===null||CLICKDESK_COMPANY_LOGO.indexOf("images")==0){CLICKDESK_COMPANY_LOGO=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/profile-img.png"}else{CLICKDESK_COMPANY_LOGO=(CLICKDESK_COMPANY_LOGO)}var B=createDOMElement("div","clickdesk_header");B.className="ClickDesktop ClickDeskclearfix";B.innerHTML='<div class="ClickDeskcontrols" style="height:15px !important;z-index:10;"><a id="clickdesk_close" title="Close" class="cd-icon-close" href="#" onclick="return false;"></a><a id="clickdesk_min" title="Minimize" class="cd-icon-minimize" href="#" onclick="return false;"></a><a id="clickdesk_popout" title="Popout" class="cd-icon-expand" style="display:none;" href="#" onclick="return false;"></a></div><div class="ClickDeskheading ClickDeskclearfix" id="cd-liviliyheadingtop"><div class="ClickDeskprofilepic alignleft" ID="cd-ClickDeskprofilepic"><img id="cd_agent_image" class="cd_agent_image" src="'+CLICKDESK_COMPANY_LOGO+'" style="max-width: 50px;" width="50" height="50" /></div><div class="ClickDeskdetails alignright" id="cd-ClickDeskdetails"><h2 id="cd_agent_name" class="cd_agent_name">Live Chat</h2><span style="display:none;">Customer Support Manager</span></div></div><div class="ClickDeskheading ClickDeskclearfix" id="ClickDeskSocialLogo"><div class="ClickDeskprofilepic alignleft"><img id="cd_social_logo" src="'+CLICKDESK_STATIC_AMAZON_IMAGE_URL+'/images/profile-img.png" width="50" height="50" style="border:none;max-width: 50px;" /></div><div class="ClickDeskdetails alignleft" id="ClickDeskSocialLike" style="padding-left:2px !important;padding-top:20px !important;"><h2 id="cd_socialagent_name" style="margin-bottom:8px;">Social Network</h2><div id="social_nw_fallow_image" style="padding-left:2px;"><a href='+F+' class="twitter-share-button">Tweet</a><a href='+G+' class="twitter-follow-button" data-show-count="false" data-show-screen-name="false" data-width="100px" >Follow</a></div></div></div></div>';var k=createDOMElement("div","ClickdeskprechatForm","ClickDeskcontent");k.innerHTML='<div class="ClickDeskpreChatForm" id="cd-ClickDeskpreChatForm"><h1>We are Online!</h1><p id="clickdesk_online_status_message" style="color: #2D3544;">Please enter your <strong>Name</strong> and <strong>Email ID</strong><br />to chat with our agents</p><div><span class="cd_input_field_span">Name</span><input type="text" class="ClickDesknameField" id="cd_prechat_name" value="" style="" maxlength="100" /><span class="cd_required" id="cd_onl_na_sp" title="required">*</span></div><div><span class="cd_input_field_span" >Email</span><input type="text" id="cd_prechat_email" class="ClickDeskmailField" value="" style=" maxlength="100" /><span class="cd_required" id="cd_onl_em_sp" style="bottom: 49%;" title="required">*</span></div><div><span class="cd_input_field_span">Message</span><textarea id="cd_prechat_msg" class="ClickDeskmessageField">Write A Message</textarea><span class="cd_required" id="cd_onl_ms_sp" title="required">*</span></div><div id="cd_valid_email" style="visibility:hidden;color:red;margin:-5px 0 0 6px;height:14px;"></div><div style="position:relative;"><div class="ClickDeskSubmitLarge clickdesk_button_style" id="clickdesk_online_submit" align="center" ><div class="clickdesk_button_text" id="clickdesk_online_submit_text"></div></div><input type="submit" id="cd_prechat_button" class="ClickDeskSubmitLarge" value="" style="display:none;" /></div><div class=\'ClickDeskBrand\'><a rel="nofollow" href=\''+f+"' target='_blank'><img src='"+q+"' /></a></div></div>";var l=createDOMElement("div","ClickdeskofflineForm","ClickDeskcontent");l.innerHTML='<div class="ClickDeskpreChatForm" id="cd-ClickDeskofflinetForm" ><h1>We are Sorry!</h1><p id="clickdesk_offline_status_message" style="color: #2D3544;">Seems no one can serve you now.<br />If you leave your <strong>Email ID</strong>, we will get back to you soon.</p><div><span class="cd_input_field_span" >Name</span><input type="text" id="cd_offline_name" class="ClickDesknameField" value="" style=" maxlength="100" /><span class="cd_required" id="cd_ofl_na_sp" title="required">*</span></div><div><span class="cd_input_field_span" >Name</span><input type="text" id="cd_offline_email" class="ClickDeskmailField" value="" style=" maxlength="100" /><span class="cd_required" id="cd_ofl_em_sp" title="required">*</span></div><div><span class="cd_input_field_span"></span><textarea id="cd_offline_msg" class="ClickDeskmessageField"></textarea><span class="cd_required" id="cd_ofl_ms_sp" title="required">*</span></div><div id="offline_valid_email" style="display:none;color:red;margin-left: 6px;"></div><div style="position:relative;"><div class="ClickDeskSubmitLarge clickdesk_button_style" id="clickdesk_offline_submit" align="center" ><div class="clickdesk_button_text" id="clickdesk_offline_submit_text"></div></div><input type="submit" id="cd_offline_button"  class="ClickDeskSubmitLarge" value="" style="display:none;" /></div><div id="cd_loading" style="display:none;position: absolute;left: 35%;top: 0px;font-weight: bold;background-color: #F4E794;padding:5px;;" >Sending...</div><div class=\'ClickDeskBrand\'><a rel="nofollow" href=\''+f+"' target='_blank'><img src='"+q+"' /></a></div></div>";var v=createDOMElement("div","emailChatTsToVisitorForm","ClickDeskcontent");v.innerHTML='<div class="ClickDeskpreChatForm" id="cd-emailChatTsToVisitorForm" style="height:279px !important;"><h1>Email Me This Chat Transcript!</h1><p id="clickdesk_emailtovisitor_status_message" style="color: #2D3544;margin-bottom:10px;line-height:1.5;">Please enter your name and email to receive this full chat transcript after closing the chat session.</p><div style="position:relative !important;"><span class="cd_input_field_span" >Name</span><input type="text" class="ClickDesknameField" value="" id="cd-sendEmailToVistorName" maxlength="100" /></div><div style="position:relative !important;"><span class="cd_input_field_span" >Name</span><input type="text" class="ClickDeskmailField" value="" id="cd-sendEmailToVistorEmail" maxlength="100" /><span class="cd_required" title="required" style="display:block !important;">*</span></div><div style="clear:both;height:0px;"></div><div id="emailChatToVisitor_valid_email" style="display:none;color:red;margin-left: 6px;"></div><div style="position:relative;height: 30px;display:none;"><div class="ClickDeskSubmitSmall clickdesk_button_style" id="clickdesk_etv_submit" align="center" style="margin-left: 5% !important;top:2px;width:100px !important;display:none;"><div class="clickdesk_button_text" id="clickdesk_etv_submit_text" style="padding-top: 3px !important;"></div></div><div class="ClickDeskSubmitSmall clickdesk_button_style" id="clickdesk_etv_cancel" align="center" style="margin-left: 5% !important;top:2px;width:100px !important;display:none;"><div class="clickdesk_button_text" id="clickdesk_etv_cancel_text" style="padding-top: 3px !important;"></div></div></div><input type="submit" id="emailChatTsToVisitor_submit" class="ClickDeskSubmitLarge" value="Send" style="position:relative !important;margin-top: 5px !important;"/><input type="submit" id="cd_emailToVistitor_cancel" class="ClickDeskSubmitSmall" value="Cancel" style="display:none;position:relative !important;float:left;max-width:45%;margin-left:6% !important;padding:0px 4px !important;display:none;"/><div><a style="margin:4px 13px 0px 0px;font-weight:bold;font-size:12px;" id="cd_emailToVistitor_acl" onclick="return false;"><< Cancel</a></div><div style="clear:both;height:0px;"></div><div style="margin-top: 4px;font-weight: bold;text-align: center;" id="cd_emailToVistitor_status"></div><div style="clear:both;"></div><div class=\'ClickDeskBrand\' style=\'position:absolute;bottom:7%;left:35%;\'><a rel="nofollow" href=\''+f+"' target='_blank'><img src='"+q+"' /></a></div></div>";var M=createDOMElement("div","ClickdeskofflinethxMsg","ClickDeskcontent");M.innerHTML='<div class="ClickDeskpreChatForm" style="height:282px;z-index:50;background-color:whiteSmoke;"><div align="center"><img src="'+CLICKDESK_STATIC_AMAZON_IMAGE_URL+'/images/emailed.png" width="100px" height="65px" style="margin-left:25%;" /></div><div style="margin-top:20px !important;text-align:left !important;font-size:17px !important;color:'+CLICKDESK_COLOR+'" id="ClickdeskofflinethxMsgName"></div><h1 style="margin-top:5px !important;font-size:17px !important;line-height:23px !important;opacity:0.8;font-style:italic;" id="ClickdeskofflineSucsMsg">Thanks for dropping by.<br />We shall get to you soon.</h1><br /></br/><div class=\'ClickDeskBrand\' style=\'margin-top:5px;\'><a rel="nofollow" href=\''+f+"' target='_blank'><img src='"+q+"' /></a></div></div>";var H=createDOMElement("div","clickdesk_chat_session","livilycontent");H.innerHTML='<div class="ClickDeskCommands"><a class="cd-smile" id="cd_smile" onclick="return false;" href="#" style="float:left;"></a><a class="cd-icon-sound" id="cd_voice" onclick="return false;" href="#" style="float:left;margin-left:5px;"></a><a class="cd-icon-control-mail" onclick="return false;" id="cd_email" href="#" style="float:left;"></a><a class="cd-icon-control-rating count-o" id="cd_rating" href="#" style="float:left;display: none;" title="Rate this chat session">0</a><a class="cd-footicon-brand" id="cd_footicon-brand" href="'+f+'" target="_blank" style="float:right;"></a><div id="cd_user_rating" style="float:right;display:none;" title="Rate this chat session"><a href="#" class="cd-undone" rel="1" onclick="return false;">1</a><a href="#" class="cd-undone" rel="2" onclick="return false;">2</a><a href="#" class="cd-undone" rel="3" onclick="return false;">3</a><a href="#" class="cd-undone" rel="4" onclick="return false;">4</a><a href="#" class="cd-undone" rel="5" onclick="return false;">5</a></div></div><div id="clickdesk_smilediv" style="display:none;position: absolute;z-index: 1;width: 120px;margin-left:3px;"><div><span class="cd-Smile"></span><span class="cd-Laugh"></span><span class="cd-Cool"></span><span class="cd-Counter"></span><span class="cd-Wink"></span><span class="cd-Cheeky"></span><span class="cd-Sweating"></span><span class="cd-Crying"></span><span class="cd-Angry"></span><span class="cd-Giggle"></span><span class="cd-Allforyou"></span><span class="cd-Hmm"></span><span class="cd-Heart"></span><span class="cd-Star"></span><span class="cd-Yes"></span><span class="cd-No"></span><div style="text-align:left;border-top: 1px solid whiteSmoke;padding: 2px;height:18px;"><div id="cd_set_smilyName" style="color:white;padding-left: 7px;float:left;"></div><div  id="cd_set_smilySymbol" style="color:white;margin-right: 12px;float:right;"></div></div></div></div><div id="clickdesk_chat_messages" class="ClickDeskChatMessage"><ul id="clickdesk_session"></ul></div><div class="ClickDeskChatTypebox" style="position:relative;height:48px;"><form onsubmit="return sendClickDeskChatMessage();" id="csChatSendForm" name="broadcastchatForm" style="position:relative;background-color:#f4e794 !important;"><div style="float:left;width:77%;position:relative;"><span id="broadcastchat_span" style="z-index: 1;top: 14px;line-height: 20px;left: 12px;display:none;" >Write message here</span><input type="text" id="broadcastchat" value="" onkeydown="CD_Live_Chat.stopPropogation(event);" name="broadcastchat" style="border:none !important;background-color:#F4E794 !important;position:relative;width:185px !important;height: 42px !important;padding: 0px 0px 0px 10px !important;border-radius:0px !important;-webkit-border-radius:0px !important;-moz-border-radius:0px !important;"/></div><div style="float:right;width:22%;position:relative;height:40px;"><div class="ClickDeskSubmitSmall clickdesk_button_style" id="clickdesk_chatsend" align="center" style="right:4px;max-width: 100%;padding:0px 4px !important;"><div class="clickdesk_button_text" id="clickdesk_chatsend_text" style="padding-top: 3px !important;">Send</div></div><input id="broadcastchatsend" type="submit" class="ClickDeskSubmitSmall" value="Send" style="right:5px;max-width: 22%;padding:0px 4px !important;display:none!important;" /></div></form></div>';var x=createDOMElement("li","clickdesk_new_message");x.innerHTML='<div class="ClickDeskMeta"><div class="ClickDeskName alignleft" id="cd_name"></div><div class="ClickDeskTime alignright" style="visibility:hidden;" id="cd_date"></div><div style="height:0px;" class="clear"></div></div><p id="cd_chat_msg"></p>';var C=createDOMElement("p","cd_rewrite","cd_rewrite");C.innerHTML='<span id="cd_rewrite_msg" style="font-size:13px;color:#000;"></span>';var N=createDOMElement("div","clickdeskchat_social_template");N.innerHTML='<big><img src="'+CLICKDESK_STATIC_AMAZON_IMAGE_URL+'/images/spinner-big.gif" /></big><div id="clickdesk_twitter" style="display:none;"></div><iframe id="cd_facebook_frame" onload="cd_hideloading()" src="" allowtransparency="true" scrolling="auto" frameBorder="0" style="display:none;border: 0px;" width="100%" height="280px"></iframe><iframe id="cd_phone_frame" onload="cd_hideloading()" src="" allowtransparency="true" scrolling="auto" frameBorder="0" style="display:none;border: 0px;" width="100%" height="280px"></iframe>';var y=createDOMElement("div","clickdesk_footer_tabs","ClickDeskFooter");y.innerHTML='<ul><li class="ClickDeskActive"><a class="cd-footicon-chat" id="cd_chat" href="#" onclick="return false;"></a></li><li style="display:none;"><a class="cd-footicon-phone" id="cd_phone" href="#" onclick="return false;"></a></li><li style="display:none;"><a class="cd-footicon-twitter" id="cd_twitter" href="#" onclick="return false;"></a></li><li style="display:none;"><a class="cd-footicon-facebook" id="cd_facebook" href="#" onclick="return false;"></a></li><li style="display:none;"><a class="cd-footicon-youtube" id="cd_youtube" href="#" onclick="return false;"></a></li><li class="lastChild" style="display:none;"><a class="cd-footicon-brand" href="'+f+'" target="_blank" ></a></li></ul>';var J=createDOMElement("span","cd_playsound");o.appendChild(B);o.appendChild(k);o.appendChild(l);o.appendChild(x);o.appendChild(C);o.appendChild(M);o.appendChild(N);o.appendChild(v);o.appendChild(H);o.appendChild(y);o.appendChild(J);setElementStyleByID("ClickdeskofflineForm",{display:"none"});setElementStyleByID("ClickdeskprechatForm",{display:"none"});setElementStyleByID("clickdesk_footer",{display:"block"});setElementStyleByID("clickdeskchat_social_template",{display:"none"});setElementStyleByID("clickdesk_new_message",{display:"none"});setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});setElementStyleByID("cd_playsound",{height:"0px",display:"none"});addClickDeskBorder();applyLivilySocialLinks();var d=widgetPrefsJSON.customvalidationmssgs_prefs;if(d===undefined||d==null){WIDGET_CUSTOM_MESSAGES=(WIDGET_CUSTOM_MESSAGES);WIDGET_CUSTOM_MESSAGES=JSON.parse(WIDGET_CUSTOM_MESSAGES)}else{WIDGET_CUSTOM_MESSAGES=d}clickdeskLog("WIDGET_CUSTOM_MESSAGES");clickdeskLog(WIDGET_CUSTOM_MESSAGES);try{var K=WIDGET_CUSTOM_MESSAGES.customstatusmssgs_chat_window_label;if(K!==undefined&&K!=null){K=(K).replace(/&#39;/g,"'").replace(/'/g,"&#39;").replace(/\\/g,"&#92;");CLICKDESK_CHAT_WINDOW_TITLE=K}clickdeskElementWrap("#cd_agent_name")[0].innerHTML=CLICKDESK_CHAT_WINDOW_TITLE;var a=CLICKDESK_readCookie(CLICKDESK_USER_SESSION_RATING);if(a!==undefined&&a!=null){document.getElementById("cd_rating").innerHTML=a;var g=clickdeskElementWrap("#cd_user_rating a");for(var Q=0;Q<g.length;Q++){var j=g[Q];if(Q==a){break}j.className="cd-done"}}}catch(R){}if(!S){try{var A=clickdeskElementWrap(".ClickDeskBrand");for(var Q=0;Q<A.length;Q++){var j=A[Q];j.style.visibility="hidden"}}catch(R){}}try{var b=WIDGET_CUSTOM_MESSAGES.customstatusmssgs_chat_visitor_label;if(b!==undefined&&b!=null){b=(b).replace(/&#39;/g,"'");CLICKDESK_CHAT_AGENT_NAME=b}}catch(R){}if(r!==undefined||r!=null){setElementStyleByID("cd_footicon-brand",{display:"none"})}if(cd_ie_browser_version>5){clickdeskElementWrap("#clickdesk_popup").addClass("cd_ie")}var m="",L="";var n=widgetPrefsJSON.phone_systems_json;try{var u=widgetPrefsJSON.user_phone;if(u!==undefined||u!=null){m=u.user_phone_type;L=u.user_phone_number}if((m!==undefined&&m!=null&&m.length>0&&L!==undefined&&L!=null&&L.length>0)||((n!==undefined&&n!=null))){appendCallUsTobody(L,m);clickdeskLog(u);showCallOption()}else{hideCallOption()}}catch(R){clickdeskLog(R)}var e=widgetPrefsJSON.offline_form_prefs;var c=widgetPrefsJSON.online_form_prefs;var w=widgetPrefsJSON.emailtovisitor_form_prefs;appendOfflineCustomFields(e);appendPrechatCustomFields(c);appendEmailToVisitorCustomFields(w);clickdeskElementWrap("div.clickdesk_b").addClass("loaded");initializeOptions();var O=readSessionCookie("active_popup");try{if(CLICKDESK_NO_SCRIPT_PAGE!==undefined){O=true}}catch(R){}var I=getActiveSession();if(O!=null&&O!==undefined||(CLICKDESK_AGENT_STATUS=="online"&&(I!=null&&I!==undefined))){showLivechatPopup()}else{if(CLICKDESK_PROACTIVE_JSON!=null&&CLICKDESK_PROACTIVE_JSON!==undefined&&CLICKDESK_AGENT_STATUS=="online"){clickdeskLog("checkSession(proactiveJSON)");try{var T=CLICKDESK_PROACTIVE_JSON.message;if(T!==undefined&&T!=null){var z=document.title;if(z===undefined||z==null){z=""}T=T.replace("$title",z).replace("$title",z).replace("$title",z);T=T.replace(/&#39;/g,"'").replace(/&#92;/g,'"');CLICKDESK_PROACTIVE_JSON.message=T;clickdeskLog(CLICKDESK_PROACTIVE_JSON)}}catch(R){}CLICKDESK_TIME=setTimeout("checkSession(CLICKDESK_PROACTIVE_JSON);",parseInt(CLICKDESK_WAIT_TIME)*1000)}}if(E!==undefined){initializeOptions();E()}}function appendOfflineCustomFields(b){var c=OFFLINE_STATUS_LABEL,d=OFFLINE_NAME_LABEL,g=OFFLINE_EMAIL_LABEL,a=OFFLINE_MESSAGE_LABEL;var f=OFFLINE_BUTTON_VALUE;WIDGET_CUSTOM_MESSAGES.offline_send_success_label=OFFLINE_SEND_SUCCESS_MESSAGE;var e=OFFLINE__HEADER_TEXT;if(b!==undefined&&b!==null){if(b.offline_header_label!==undefined||b.offline_header_label!=null){e=(b.offline_header_label);e=CLICKDESKReplaceSpecialCharacters(e)}if(b.offline_status_label!==undefined||b.offline_status_label!=null){c=(b.offline_status_label);c=CLICKDESKReplaceSpecialCharacters(c)}else{c=OFFLINE_STATUS_LABEL}if(b.offline_form_name_label!==undefined||b.offline_form_name_label!=null){d=(b.offline_form_name_label);d=CLICKDESKReplaceSpecialCharacters(d)}else{d=OFFLINE_NAME_LABEL}if(b.offline_form_email_label!==undefined||b.offline_form_email_label!=null){g=(b.offline_form_email_label);g=CLICKDESKReplaceSpecialCharacters(g)}else{g=OFFLINE_EMAIL_LABEL}if(b.offline_message_label!==undefined||b.offline_message_label!=null){a=(b.offline_message_label);a=CLICKDESKReplaceSpecialCharacters(a)}else{a=OFFLINE_MESSAGE_LABEL}if(b.offline_form_button_label!==undefined||b.offline_form_button_label!=null){f=(b.offline_form_button_label);f=CLICKDESKReplaceSpecialCharacters(f)}else{f=OFFLINE_BUTTON_VALUE}if(b.offline_send_success_label!==undefined||b.offline_send_success_label!=null){WIDGET_CUSTOM_MESSAGES.offline_send_success_label=b.offline_send_success_label}if(b.offline_emailvstext_label!==undefined||b.offline_emailvstext_label!=null){OFFLINE_FIRSTFIELDEMAILVSTEXT=b.offline_namefield_emailvstext_label}if(b.offline_emailvstext_label!==undefined||b.offline_emailvstext_label!=null){OFFLINE_SECONDFIELDEMAILVSTEXT=b.offline_emailvstext_label}}var h="Message sent successfully";if(CLICKDESK_OFFLINEFORM_NAME){document.getElementById("cd_ofl_na_sp").style.display="block"}if(CLICKDESK_OFFLINEFORM_EMAIL){document.getElementById("cd_ofl_em_sp").style.display="block"}document.getElementById("cd_ofl_ms_sp").style.display="block";clickdeskLog(clickdeskElementWrap("#cd-ClickDeskofflinetForm h1"));clickdeskElementWrap("#cd-ClickDeskofflinetForm h1")[0].innerHTML=e;document.getElementById("clickdesk_offline_status_message").innerHTML=c;document.getElementById("cd_offline_name").value="";document.getElementById("cd_offline_name").previousSibling.innerHTML=d;document.getElementById("cd_offline_email").value="";document.getElementById("cd_offline_email").previousSibling.innerHTML=g;document.getElementById("cd_offline_msg").value="";document.getElementById("cd_offline_msg").previousSibling.innerHTML=a;document.getElementById("cd_offline_button").value=f;document.getElementById("clickdesk_offline_submit_text").innerHTML=f}function appendPrechatCustomFields(d){var a=PRECHAT_STATUS_LABEL,m=PRECHAT_NAME_LABEL,g=PRECHAT_EMAIL_LABEL,j=PRECHAT_MESSAGE_LABEL;var l=PRECHAT_BUTTON_VALUE;var f=PRECHAT_HEADER_TEXT;if(d!==undefined&&d!==null){if(d.prechat_header_label!==undefined||d.prechat_header_label!=null){f=(d.prechat_header_label);f=CLICKDESKReplaceSpecialCharacters(f)}if(d.prechat_status_label!==undefined||d.prechat_status_label!=null){a=(d.prechat_status_label);a=CLICKDESKReplaceSpecialCharacters(a)}else{a=PRECHAT_STATUS_LABEL}if(d.prechat_form_name_label!==undefined||d.prechat_form_name_label!=null){m=(d.prechat_form_name_label);m=CLICKDESKReplaceSpecialCharacters(m)}else{m=PRECHAT_NAME_LABEL}if(d.prechat_form_email_label!==undefined||d.prechat_form_email_label!=null){g=(d.prechat_form_email_label);g=CLICKDESKReplaceSpecialCharacters(g)}else{g=PRECHAT_EMAIL_LABEL}if(d.prechat_form_message_label!==undefined||d.prechat_form_message_label!=null){j=(d.prechat_form_message_label);j=CLICKDESKReplaceSpecialCharacters(j)}else{j=PRECHAT_MESSAGE_LABEL}if(d.prechat_form_button_label!==undefined||d.prechat_form_button_label!=null){l=(d.prechat_form_button_label);l=CLICKDESKReplaceSpecialCharacters(l)}else{l=PRECHAT_BUTTON_VALUE}if(d.prechat_namefield_emailvstext_label!==undefined||d.prechat_namefield_emailvstext_label!=null){PRECHAT_FIRSTFIELDEMAILVSTEXT=(d.prechat_namefield_emailvstext_label)}if(d.prechat_emailvstext_label!==undefined||d.prechat_emailvstext_label!=null){PRECHAT_SECONDFIELDEMAILVSTEXT=(d.prechat_emailvstext_label)}if(d.prechat_emailvstext_label!==undefined||d.prechat_emailvstext_label!=null){PRECHAT_CUSTOMFIELDEMAILVSTEXT=(d.prechat_customfield_emailvstext_label)}if(d.prechat_refill_form_fields!==undefined||d.prechat_refill_form_fields!=null){PRECHAT_REFILL_FORM_FILEDS=(d.prechat_refill_form_fields)}var b=d.prechat_form_show_custom_field_required;if(b!==undefined&&b=="yes"){CLICKDESK_ONLINEFORM_CUSTOM_FIELD="yes";if(d.prechat_form_custom_field_required!==undefined&&d.prechat_form_custom_field_required=="yes"){CLICKDESK_ONLINEFORM_CUSTOM_FIELD_REQUIRED=true}var k=d.prechat_form_custom_field_required;var e="";if(d.prechat_custom_field_label!==undefined){e=(d.prechat_custom_field_label);e=CLICKDESKReplaceSpecialCharacters(e)}var c=createDOMElement("div");if(k!==undefined&&k=="yes"){c.innerHTML='<span class="cd_input_field_span">'+e+'</span><input type="text" class="ClickDeskmessageField" id="cd_prechat_custom" value="" style="" maxlength="100" /><span class="cd_required" style="display:block;" title="required">*</span>'}else{c.innerHTML='<span class="cd_input_field_span">'+e+'</span><input type="text" class="ClickDeskmessageField" id="cd_prechat_custom" value="" style="" maxlength="100" />'}document.getElementById("cd-ClickDeskpreChatForm").insertBefore(c,document.getElementById("cd_prechat_msg").parentNode);cd_DEFAULT_MSGS.cd_prechat_custom=clickdeskElementWrap("#cd_prechat_custom")[0].value;if(PRECHAT_CUSTOMFIELDEMAILVSTEXT=="email"){document.getElementById("cd_prechat_custom").className="ClickDeskmailField"}else{document.getElementById("cd_prechat_custom").className="ClickDeskmessageField"}}}var h="Please enter valid email.";if(CLICKDESK_ONLINEFORM_NAME){document.getElementById("cd_onl_na_sp").style.display="block"}if(CLICKDESK_ONLINEFORM_EMAIL){document.getElementById("cd_onl_em_sp").style.display="block"}document.getElementById("cd_onl_ms_sp").style.display="block";clickdeskElementWrap("#cd-ClickDeskpreChatForm h1")[0].innerHTML=f;document.getElementById("clickdesk_online_status_message").innerHTML=a;document.getElementById("cd_prechat_name").value="";document.getElementById("cd_prechat_name").previousSibling.innerHTML=m;document.getElementById("cd_prechat_email").value="";document.getElementById("cd_prechat_email").previousSibling.innerHTML=g;document.getElementById("cd_prechat_msg").value="";document.getElementById("cd_prechat_msg").previousSibling.innerHTML=j;document.getElementById("cd_prechat_button").value=l;document.getElementById("clickdesk_online_submit_text").innerHTML=l}function appendEmailToVisitorCustomFields(d){var g=EMAILTOVISITOR_STATUS_LABEL,a=EMAILTOVISITOR_NAME_LABEL,h=EMAILTOVISITOR_EMAIL_LABEL,f=EMAILTOVISITOR_SEND_BUTTON_VALUE,j=EMAILTOVISITOR_CANCEL_BUTTON_VALUE;var c=EMAILTOVISITOR__HEADER_TEXT;if(d!==undefined&&d!==null){if(d.emailtovisitor_form_header_label!==undefined||d.emailtovisitor_form_header_label!=null){c=(d.emailtovisitor_form_header_label);c=CLICKDESKReplaceSpecialCharacters(c)}if(d.emailtovisitor_form_status_message_label!==undefined||d.emailtovisitor_form_status_message_label!=null){g=(d.emailtovisitor_form_status_message_label);g=CLICKDESKReplaceSpecialCharacters(g)}else{g=EMAILTOVISITOR_STATUS_LABEL}if(d.emailtovisitor_form_name_label!==undefined||d.emailtovisitor_form_name_label!=null){a=(d.emailtovisitor_form_name_label);a=CLICKDESKReplaceSpecialCharacters(a)}else{a=EMAILTOVISITOR_NAME_LABEL}if(d.emailtovisitor_form_email_label!==undefined||d.emailtovisitor_form_email_label!=null){h=(d.emailtovisitor_form_email_label);h=CLICKDESKReplaceSpecialCharacters(h)}else{h=EMAILTOVISITOR_EMAIL_LABEL}if(d.emailtovisitor_form_send_button_text!==undefined||d.emailtovisitor_form_send_button_text!=null){f=(d.emailtovisitor_form_send_button_text);f=CLICKDESKReplaceSpecialCharacters(f)}else{f=EMAILTOVISITOR_SEND_BUTTON_VALUE}if(d.emailtovisitor_form_cancel_button_text!==undefined||d.emailtovisitor_form_cancel_button_text!=null){j=(d.emailtovisitor_form_cancel_button_text);j=CLICKDESKReplaceSpecialCharacters(j)}else{j=EMAILTOVISITOR_CANCEL_BUTTON_VALUE}try{if(d.send_emailtovisitor_enabled!=undefined&&d.send_emailtovisitor_enabled=="no"){setElementStyleByID("cd_email",{display:"none"})}}catch(b){}}var e="Please enter valid email.";clickdeskElementWrap("#cd-emailChatTsToVisitorForm h1")[0].innerHTML=c;document.getElementById("clickdesk_emailtovisitor_status_message").innerHTML=g;document.getElementById("cd-sendEmailToVistorName").value="";document.getElementById("cd-sendEmailToVistorName").previousSibling.innerHTML=a;document.getElementById("cd-sendEmailToVistorEmail").value="";document.getElementById("cd-sendEmailToVistorEmail").previousSibling.innerHTML=h;document.getElementById("emailChatTsToVisitor_submit").value=f;document.getElementById("cd_emailToVistitor_cancel").value=j;document.getElementById("clickdesk_etv_submit_text").innerHTML=f;document.getElementById("clickdesk_etv_cancel_text").innerHTML=j;document.getElementById("cd_emailToVistitor_acl").innerHTML="<< "+j}function CLICKDESKReplaceSpecialCharacters(b){try{if(b!==undefined&&b!=null){return b.replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&#92;/g,"\\")}}catch(a){clickdeskLog("CLICKDESKReplaceCharactersJSON ="+a);return b}return b}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var FlashDetect=new function(){var a=this;a.installed=false;a.raw="";a.major=-1;a.minor=-1;a.revision=-1;a.revisionStr="";var b=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(h){return d(h)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(k){var h="6,0,21";try{k.AllowScriptAccess="always";h=d(k)}catch(j){}return h}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(h){return d(h)}}];var d=function(k){var h=-1;try{h=k.GetVariable("$version")}catch(j){}return h};var g=function(h){var k=-1;try{k=new ActiveXObject(h)}catch(j){k={activeXError:true}}return k};var c=function(j){var h=j.split(",");return{raw:j,major:parseInt(h[0].split(" ")[1],10),minor:parseInt(h[1],10),revision:parseInt(h[2],10),revisionStr:h[2]}};var f=function(l){var j=l.split(/ +/);var k=j[2].split(/\./);var h=j[3];return{raw:l,major:parseInt(k[0],10),minor:parseInt(k[1],10),revisionStr:h,revision:e(h)}};var e=function(h){return parseInt(h.replace(/[a-zA-Z]/g,""),10)||a.revision};a.majorAtLeast=function(h){return a.major>=h};a.minorAtLeast=function(h){return a.minor>=h};a.revisionAtLeast=function(h){return a.revision>=h};a.versionAtLeast=function(j){var k=[a.major,a.minor,a.revision];var h=Math.min(k.length,arguments.length);for(i=0;i<h;i++){if(k[i]>=arguments[i]){if(i+1<h&&k[i]==arguments[i]){continue}else{return true}}else{return false}}};a.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var l="application/x-shockwave-flash";var k=navigator.mimeTypes;if(k&&k[l]&&k[l].enabledPlugin&&k[l].enabledPlugin.description){var h=k[l].enabledPlugin.description;var m=f(h);a.raw=m.raw;a.major=m.major;a.minor=m.minor;a.revisionStr=m.revisionStr;a.revision=m.revision;a.installed=true}}else{if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var h=-1;for(var j=0;j<b.length&&h==-1;j++){var n=g(b[j].name);if(!n.activeXError){a.installed=true;h=b[j].version(n);if(h!=-1){var m=c(h);a.raw=m.raw;a.major=m.major;a.minor=m.minor;a.revision=m.revision;a.revisionStr=m.revisionStr}}}}}}()};FlashDetect.JS_RELEASE="1.0.4";var WIDGET_PREFERENCE_DB_NAME="widget_prefs";var BUBBLE_PREFERENCES="bubble";var BUTTON_PREFERENCES="button";var SESSION_COOKIE_NAME="active_session";var SESSION_ID="session_id";var SESSION_HISTORY="session_history";var SESSION_VISITOR="visitor_token";var textToShow="";var CD_CLIENT_DETAILS="cd_client_details";var VISITOR_BLOCK_PERIOD=30;var CHANNEL_ID="channel_id";var ARCHIVE_SESSION="archive_session_id";var ARCHIVE_SESSION_PERIOD=180;var CLICKDESK_AGENT_NICK_NAME="Live-chat";var CLICKDESK_AGENT_IMAGE_DEFAULT_URL=glcpath+"images/profile-pic.png";var sound=true;var VISITOR_EMAIL="visitor_email";var VISITOR_NAME="visitor_name";var agentId=undefined;var visitorToken;var visitorEmail;var visitorName;var livilyPhone;var chat_link_livily;var toolbar_button_livily;var chat_button_livily;var numberToCall;var callType;var cd_DEFAULT_MSGS=[];var FACEBOOKURL=glcp+"graph.facebook.com/";var twitter_response=false;var twitter_response_counter=0;var facebook_response=false;var facebook_response_counter=0;var CLICKDESK_AGENT_NEW_MESSAGE=false;var CLICKDESK_VISITOR="visitor";var WIDGET_CUSTOM_MESSAGES='{"customstatusmssgs_send_success_mssg_label": "We have saved your preferences","customstatusmssgs_agent_exceeded_time_label": "It seems to be taking longer than usual. You can continue to be on hold or leave us an offline message.","customstatusmssgs_nosession_label": "You have no active chat session at this time.","customstatusmssgs_wait_input_field_status_label": "Please wait...","customstatusmssgs_send_request_label": "Sending...","customstatusmssgs_message_field_label": "Enter your message to chat","customstatusmssgs_name_field_label": "Please fill the required fields.","customstatusmssgs_wait_status_label": "Please wait while we connect you to an available agent...","customstatusmssgs_email_field_label": "Enter the valid email address.","customstatusmssgs_send_failure_mssg_label": "Sending failed.Please try again..."}';var PRECHAT_STATUS_LABEL="Please enter your name and email address to begin chatting with us.";var PRECHAT_NAME_LABEL="Name";var PRECHAT_EMAIL_LABEL="Email";var PRECHAT_CUSTOM_LABEL="Custom";var PRECHAT_MESSAGE_LABEL="Message";var PRECHAT_BUTTON_VALUE="Initiate Chat";var PRECHAT_FIRSTFIELDEMAILVSTEXT="text";var PRECHAT_SECONDFIELDEMAILVSTEXT="email";var PRECHAT_CUSTOMFIELDEMAILVSTEXT="text";var CLICKDESK_ONLINEFORM_CUSTOM_FIELD_REQUIRED=false;var PRECHAT_REFILL_FORM_FILEDS="yes";var OFFLINE_STATUS_LABEL="Please leave your name and email address, we will get back to you soon. Thanks.";var OFFLINE_NAME_LABEL="Name";var OFFLINE_EMAIL_LABEL="Email";var OFFLINE_MESSAGE_LABEL="Message";var OFFLINE_BUTTON_VALUE="Send Message";var OFFLINE_SEND_SUCCESS_MESSAGE="Thanks for dropping by.<br/>We shall get back to you soon.";var OFFLINE_FIRSTFIELDEMAILVSTEXT="text";var OFFLINE_SECONDFIELDEMAILVSTEXT="email";var EMAILTOVISITOR_STATUS_LABEL="Please enter your name and email to receive this full chat transcript after closing the chat session.";var EMAILTOVISITOR_NAME_LABEL="Name";var EMAILTOVISITOR_EMAIL_LABEL="Email";var EMAILTOVISITOR_SEND_BUTTON_VALUE="Send";var EMAILTOVISITOR_CANCEL_BUTTON_VALUE="Cancel";var CLICKDESK_CHAT_WINDOW_TITLE="Live-Chat";var PRECHAT_HEADER_TEXT="We are online. Chat with us.";var EMAILTOVISITOR__HEADER_TEXT="Email me this chat transcript";var OFFLINE__HEADER_TEXT="We are offline.";var CLICKDESK_CHAT_AGENT_NAME="me";var CLICKDESK_PROACTIVE_SESSION=false;var CLICKDESK_REFERRER="clickdesk_referrer";var CLICKDESK_USER_SESSION_RATING="cd_rating";var CLICKDESK_EMOTIONS1={":)":"cd-Smile",":D":"cd-Laugh","B-)":"cd-Cool",":C":"cd-Counter",";)":"cd-Wink",":P":"cd-Cheeky","(:L":"cd-Sweating",";(":"cd-Crying","X-(":"cd-Angry",":G":"cd-Giggle",":F":"cd-Allforyou","L-(":"cd-Hmm",":H":"cd-Heart","(*)":"cd-Star","(Y)":"cd-Yes","(N)":"cd-No"};var CLICKDESK_STATIC_AMAZON_IMAGE_URL="//d25wh3ilibgxb0.cloudfront.net";var CLICKDESK_PUSH2CALL_SOURCE="http://cdn-social.invox.com/live-call/popup/widget_v4.html";var PROACTIVE_SESSION_COOKIE="proactive_session_cookie";var CHANNELSOCKET;function connectToServer(c){var a={};a.command="new_token";a.widget_id=CLICKDESK_WIDGET_ID;LivilyLog("Connecting to server for token and channel id");var b=constructSnackRequest(a,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(b,function(f){var d=f.response;if(d!=undefined&&d!=null){LivilyLog(d);visitorToken=d.visitor_token;LivilyLog("Visitor Token "+visitorToken);var e=d.channel_id;establishChannel(e,c)}})}function establishChannel(b,c){LivilyLog("Establishing Channel "+b);setPrefs(CHANNEL_ID,b);onOpened=function(){LivilyLog("onOpened channel = "+b);LivilyLog("Channel opened "+b);if(c!==undefined){c(visitorToken)}};onMessage=function(d){var e=JSON.parse(d.data);LivilyLog(JSON.stringify(e));messageReceived(e)};onError=function(){LivilyLog("error in channel")};onClose=function(){LivilyLog("onClose close")};var a=new goog.appengine.Channel(b);CHANNELSOCKET=a.open();CHANNELSOCKET.onopen=onOpened;CHANNELSOCKET.onmessage=onMessage;CHANNELSOCKET.onerror=onError;CHANNELSOCKET.onclose=onClose}function getPrefs(a,c,d,g,f,e){LivilyLog("Reading "+a+" from cookie.");var b=CLICKDESK_readCookie(a);if(b==null){LivilyLog("Cookie not found "+a)}return b}function setPrefs(a,b,c){CLICKDESK_createCookie(a,b,c)}function deletePrefs(a){CLICKDESK_eraseCookie(a)}function CLICKDESK_createCookie(c,d,e){c=CLICKDESK_WIDGET_ID+"-"+c;if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+escape(d)+a+"; path=/"}function CLICKDESK_readCookie(b){b=CLICKDESK_WIDGET_ID+"-"+b;var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return unescape(f.substring(e.length,f.length))}}return null}function CLICKDESK_eraseCookie(a){CLICKDESK_createCookie(a,"",-1)}function checkProactive(){var a=getUrlVars()["url"];var b={};b.command="get_proactive_message";b.url=a;b.widget_id=CLICKDESK_WIDGET_ID;var c=constructSnackRequest(b,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(c,function(e){console.log(e);var d=JSON.parse(e);console.log(d);if(d.status=="success"){var f=d.response;appendMessage(f.message)}LivilyLog("Text sent "+d)})}function getActiveSession(){var a=getPrefs(SESSION_COOKIE_NAME);if(a){return JSON.parse(a)}return null}function checkSession(proactiveMessage){clickdeskLog("Checking session");var sessionJSON=getActiveSession();LivilyLog(sessionJSON);if(sessionJSON){var sessionId2=eval("sessionJSON."+SESSION_ID);clickdeskLog(sessionId2);if(sessionId2!=undefined){var channel=getPrefs(CHANNEL_ID);if(channel!=null){establishChannel(channel);clickdeskLog("establishChannel")}sessionId2=sessionId2.trim();enableChatButton();showChatBox();showClickDeskChatLoading();var json={};json.command="validate_session";json.session_id=sessionId2;json.visitor_url=window.location.href;var params=constructSnackRequest(json,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(params,function(response){LivilyLog("Session "+response);LivilyLog(response);hideClickDeskChatLoading();if(response.status!="success"){LivilyLog(response.errormssg);LivilyLog("Deleting old session values");document.getElementById("clickdesk_session").innerHTML="";deletePrefs(SESSION_COOKIE_NAME);deletePrefs(CHANNEL_ID);deletePrefs(VISITOR_EMAIL);showPrechatForm()}else{LivilyLog("Session valid at server");clickdeskLog(response);var agentJSON=response.response.agent;var archiveMessagesJSON=response.response.archive;if(agentJSON!==undefined&&agentJSON!=null){CLICKDESK_AGENT_NICK_NAME=agentJSON.nick_name;CLICKDESK_AGENT_IMAGE_DEFAULT_URL=agentJSON.img_url;if(IS_CD_SSL){CLICKDESK_AGENT_IMAGE_DEFAULT_URL=CLICKDESK_AGENT_IMAGE_DEFAULT_URL.replace("http://",CLICKDESK_SERVER_PROTOCOL)}var numberToCall=agentJSON.phone_number;var callType=agentJSON.phone_type;var phoneSystemCallJSON=widgetPrefsJSON.phone_systems_json;if((numberToCall!==undefined&&numberToCall!==null&&callType!==undefined&&callType!==null&&callType.length>0&&numberToCall.length>0)||(phoneSystemCallJSON!==undefined&&phoneSystemCallJSON!=null)){appendCallUsTobody(numberToCall,callType);showCallOption()}setElementStyleByID("cd_user_rating",{display:"block"})}else{CLICKDESK_AGENT_NICK_NAME=CLICKDESK_CHAT_WINDOW_TITLE;CLICKDESK_AGENT_IMAGE_DEFAULT_URL=CLICKDESK_COMPANY_LOGO}if(archiveMessagesJSON!=null||archiveMessagesJSON!==undefined){initWindow(archiveMessagesJSON)}if(CLICKDESK_AGENT_NICK_NAME!==undefined||CLICKDESK_AGENT_IMAGE_DEFAULT_URL!==undefined){var upperNickName=CLICKDESK_AGENT_NICK_NAME.slice(0,1).toUpperCase()+CLICKDESK_AGENT_NICK_NAME.slice(1);setagentNameandimage(upperNickName,CLICKDESK_AGENT_IMAGE_DEFAULT_URL)}else{clickdeskLog("Cannot find channel id")}}})}else{showPrechatForm()}}else{if(CLICKDESK_AGENT_STATUS=="offline"){showOfflineForm()}else{if(proactiveMessage!==undefined&&CLICKDESK_AGENT_STATUS=="online"){try{clickdeskElementWrap("#clickdesk_session")[0].innerHTML="";enableChatButton();CLICKDESK_createCookie(PROACTIVE_SESSION_COOKIE,PROACTIVE_SESSION_COOKIE);try{if(CLICKDESK_PROACTIVE_SOUND=="yes"){playSendSound()}}catch(err){}appendMessage(unescape(proactiveMessage.message),"srvstaticmsg");CLICKDESK_PROACTIVE_SESSION=true;showChatBox()}catch(err){clickdeskLog(err)}}else{showPrechatForm()}}}return}function initBroadcastSession(b,a){connectToServer(function(u){var s={};s.command="new_chat_broadcast_message";var t=CLICKDESK_readCookie(PROACTIVE_SESSION_COOKIE);if(t!==undefined&&t!=null){s.proactive_chat="proactive"}if(a===undefined){if(CLICKDESK_PROACTIVE_JSON!==undefined&&CLICKDESK_PROACTIVE_JSON!=null){s.user_proactive_message=CLICKDESK_PROACTIVE_JSON.message}}s.visitor_token=u;s.user_message=b;s.visitor_info=getVisitorInfo();s.widget_id=CLICKDESK_WIDGET_ID;var q=new Array();var r=CLICKDESK_readCookie("visitor_email");var d=CLICKDESK_readCookie("visitor_name");var e=PRECHAT_NAME_LABEL;var c=PRECHAT_EMAIL_LABEL;var o=PRECHAT_CUSTOM_LABEL;var l=widgetPrefsJSON.online_form_prefs;if(l!==undefined&&l!==null){if(l.prechat_form_name_label!==undefined||l.prechat_form_name_label!=null){e=(l.prechat_form_name_label)}if(l.prechat_form_email_label!==undefined||l.prechat_form_email_label!=null){c=(l.prechat_form_email_label)}if(l.prechat_custom_field_label!==undefined||l.prechat_form_email_label!=null){o=(l.prechat_custom_field_label)}}if(d!==undefined&&d!=null){s.visitor_name=d;var k={};k.fieldName=e;k.fieldValue=d;q.push(k)}if(r!==undefined&&r!=null){s.visitor_email=r;var j={};j.fieldName=c;j.fieldValue=r;q.push(j)}if(prechatCustom!==undefined&&prechatCustom!=null){s.custom_data=prechatCustom;var f={};f.fieldName=o;f.fieldValue=prechatCustom;q.push(f)}try{var n="[";for(var m=0;m<q.length;m++){if(m!=(q.length-1)){n=n+JSON.stringify(q[m])+","}else{n=n+JSON.stringify(q[m])}}n=n+"]";s.prechat_fields=n}catch(h){}var g=constructSnackRequest(s,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(g,function(v){LivilyLog("Old session "+v);if(v.response!=undefined){v=v.response;enableChatButton();document.getElementById("broadcastchat").value="";cdSetFocus();clearTimeout(CLICKDESK_SESSION_TIMEOUT);LivilyLog(v)}handleBroadcast(v)})})}function handleBroadcast(b){clickdeskLog(b.status);if(b.status!=undefined&&b.status=="success"){var a=b.response.broadcast_id;setSessionId(a,visitorToken)}if(b.status!=undefined&&b.status=="error"){var c=b.errormssg;clickdeskLog(c);appendMessage(c,"srvstaticmsg");clickdeskLog("CHANNELSOCKET");clickdeskLog(CHANNELSOCKET);if(CHANNELSOCKET!==undefined){try{CHANNELSOCKET.close()}catch(d){clickdeskLog(d)}}}}function handleProactive(a){clickdeskLog(a.status);IS_PROACTIVE=false;if(a.status!=undefined&&a.status=="error"){var b=a.errormssg;clickdeskLog(b)}}function initProactiveSession(b,a){connectToServer(function(c){var d={};d.command="new_chat_proactive_message";d.visitor_token=c;d.agent_id=b;d.user_message=a;d.visitor_info=getVisitorInfo();d.widget_id=CLICKDESK_WIDGET_ID;if(visitorName!==undefined){d.visitor_name=visitorName}if(visitorEmail!==undefined){d.visitor_email=visitorEmail}var e=constructSnackRequest(d,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(e,function(f){f=f.response;LivilyLog(f);sessionId=f.id;clickdeskLog("SessionId "+sessionId);setSessionId(sessionId,c)})})}function messageReceived(k){clickdeskLog(k);CLICKDESK_AGENT_NEW_MESSAGE=false;enableChatButton();try{removeElement("clickdesk_session","cd_remove")}catch(s){}clearTimeout(CLICKDESK_SESSION_TIMEOUT);var m=k.message_type;var l=getActiveSession();if(m!="session_closed"&&l!=null){CLICKDESK_AGENT_NEW_MESSAGE=true;clickDeskAutoPopup()}if(m=="accepted_chat_message"){var l=k.session_details;document.getElementById("broadcastchat").removeAttribute("disabled");try{var a=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_wait_input_field_status_label));if(document.getElementById("broadcastchat").value===a){document.getElementById("broadcastchat").value=""}}catch(c){}var o=k.agent_details;clickdeskLog("Agent accepted our chat. Congrats."+l+" "+o);clickdeskLog("number = "+o.phone_number);clickdeskLog("type = "+o.phone_type);var t=o.phone_number;var v=o.phone_type;var h=widgetPrefsJSON.phone_systems_json;if(t!==undefined&&t!=null&&v!==undefined&&v!=null&&v.length>0&&t.length>0){appendCallUsTobody(t,v);clickdeskLog("agentJSON");showCallOption()}else{if(h!==undefined&&h!=null){appendCallUsTobody(t,v);clickdeskLog("agentJSON");showCallOption()}else{var f="",u="";try{var d=widgetPrefsJSON.user_phone;if(d!==undefined||d!=null){f=d.user_phone_type;u=d.user_phone_number}if(f!==undefined&&f!=null&&f.length>0&&u!==undefined&&u!=null&&u.length>0){appendCallUsTobody(u,f);clickdeskLog(d);showCallOption()}else{hideCallOption()}}catch(c){clickdeskLog(c)}}}var r=l.id;var q=l.visitor_token;setSessionId(r,q);CLICKDESK_AGENT_NICK_NAME=o.nick_name;var n=CLICKDESK_AGENT_NICK_NAME.slice(0,1).toUpperCase()+CLICKDESK_AGENT_NICK_NAME.slice(1);CLICKDESK_AGENT_IMAGE_DEFAULT_URL=o.img_url;if(IS_CD_SSL){CLICKDESK_AGENT_IMAGE_DEFAULT_URL=CLICKDESK_AGENT_IMAGE_DEFAULT_URL.replace("http://",CLICKDESK_SERVER_PROTOCOL)}setagentNameandimage(n,CLICKDESK_AGENT_IMAGE_DEFAULT_URL);cdSetFocus();setElementStyleByID("cd_user_rating",{display:"block"})}else{if(m=="new_chat_message"){var j=k.new_chat_message;if(j.charAt(0)=="["){appendMessage(j,"srvstaticmsg")}else{appendMessage(j,CLICKDESK_AGENT_NICK_NAME)}if(sound){playRecvSound()}try{blinkTitle(j,20);cdSetFocus()}catch(c){clickdeskLog("title ="+c)}}else{if(m=="block_chat"){var g=k.block_ip;clickdeskLog("ip ="+g);setPrefs(VISITOR_BLOCK,g,VISITOR_BLOCK_PERIOD);IS_VISITOR_BLOCK=true;appendMessage("[Your IP has been blocked by Agent]","srvstaticmsg");document.getElementById("broadcastchatsend").setAttribute("disabled",true);try{hideCallOption()}catch(s){}}else{if(m=="session_closed"){try{clickdeskLog("Session Closed.");CHANNELSOCKET.close();CLICKDESK_PROACTIVE_SESSION=false;CLICKDESK_eraseCookie(PROACTIVE_SESSION_COOKIE);var n=CLICKDESK_CHAT_WINDOW_TITLE;var b=CLICKDESK_COMPANY_LOGO;setagentNameandimage(n,b);deletePrefs(SESSION_COOKIE_NAME);deletePrefs(CHANNEL_ID);var f="",u="",h="";try{var d=widgetPrefsJSON.user_phone;h=widgetPrefsJSON.phone_systems_json;if(d!==undefined||d!=null){f=d.user_phone_type;u=d.user_phone_number}if((f!==undefined&&f!=null&&f.length>0&&u!==undefined&&u!=null&&u.length>0)||(h!==undefined&&h!=null)){appendCallUsTobody(u,f);clickdeskLog(d);showCallOption()}else{hideCallOption()}}catch(c){clickdeskLog(c)}try{deletePrefs(CLICKDESK_USER_SESSION_RATING);clickdeskElementWrap("#cd_user_rating a").removeClass("cd-done");clickdeskElementWrap("#cd_user_rating a").addClass("cd-undone");document.getElementById("cd_rating").innerHTML="0";setElementStyleByID("clickdesk_ratingdiv",{display:"none"});setElementStyleByID("cd_user_rating",{display:"none"})}catch(c){}}catch(c){clickdeskLog("session_closed ="+c)}}else{appendMessage(JSON.stringify(k))}}}}}function sendMessage(message,name,chatType){if(!IS_VISITOR_BLOCK){var sessionJSON=getActiveSession();if(sessionJSON==null){document.getElementById("broadcastchat").value="";appendMessage(message,name);cdSetFocus();if(sound){playSendSound()}disableChatButton();initBroadcastSession(message,chatType);CLICKDESK_SESSION_TIMEOUT=setTimeout("showOfflineLink();",60000)}else{var sessionId1=eval("sessionJSON."+SESSION_ID);if(sessionId1.indexOf("BD")==0){return false}removeElement("clickdesk_session","cd_remove");document.getElementById("broadcastchat").value="";appendMessage(message,name);cdSetFocus();if(sound){playSendSound()}var json={};json.command="new_chat_message";json.session_id=sessionId1;json.user_message=message;var params=constructSnackRequest(json,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(params,function(response){LivilyLog("Text sent "+message)});cdSetFocus()}}else{appendMessage("[Your IP has been blocked by Agent]","srvstaticmsg");document.getElementById("broadcastchatsend").setAttribute("disabled",true)}}function setSessionId(d,a){var c={};c.session_id=d;c.visitor_token=a;setPrefs(SESSION_COOKIE_NAME,JSON.stringify(c));if(d.indexOf("BD")!=0){var b=getPrefs(ARCHIVE_SESSION);if(b==null||b===undefined||b.split(",").length>=40){b=d}else{b+=(", "+d)}setPrefs(ARCHIVE_SESSION,b,ARCHIVE_SESSION_PERIOD)}}function setHistory(b){var c=getPrefs(SESSION_COOKIE_NAME);if(c!=null){var a=JSON.parse(c);a.session_history=b;setPrefs(SESSION_COOKIE_NAME,JSON.stringify(a))}}function disableChatButton(){try{document.getElementById("broadcastchatsend").setAttribute("disabled",true);var b=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_wait_status_label));var a=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_wait_input_field_status_label));if(b!==undefined&&b!==null){document.getElementById("broadcastchat").setAttribute("disabled",true);document.getElementById("broadcastchat").value=a;document.getElementById("broadcastchat_span").style.display="none";document.getElementById("broadcastchat").style.backgroundColor="#EEE"}if(a!==undefined&&a!==null){removeElement("clickdesk_session","cd_remove");var e=document.getElementById("cd_rewrite").cloneNode(true);e.id="";e.className="cd_remove";e.innerHTML=b;setElementStyleByObject(e,{fontStyle:"italic",display:"block"});document.getElementById("clickdesk_session").appendChild(e);var d=widgetPrefsJSON.plan_type;if(d!=undefined&&d!=null&&(d=="free"||d.indexOf("Lite")!=-1)){var f=document.getElementById("cd_rewrite").cloneNode(true);f.id="";f.className="";f.innerHTML='This chat is powered by ClickDesk. <a href="http://www.clickdesk.com" class="cd_hyperlink" target="_blank">http://www.clickdesk.com</a>';document.getElementById("clickdesk_session").appendChild(f)}}}catch(c){clickdeskLog("disableChatButton = "+c)}}function enableChatButton(){try{document.getElementById("broadcastchat").removeAttribute("disabled");document.getElementById("broadcastchatsend").removeAttribute("disabled");document.getElementById("broadcastchat").style.backgroundColor="#FFF"}catch(a){clickdeskLog("enableChatButton = "+a)}}function deleteSession(){try{var f=getPrefs("active_session");var a=getPrefs(VISITOR_EMAIL);var h=CLICKDESK_CHAT_WINDOW_TITLE;var e=CLICKDESK_COMPANY_LOGO;setagentNameandimage(h,e);var j="",g="",b="";try{var m=widgetPrefsJSON.user_phone;if(m!==undefined||m!=null){j=m.user_phone_type;g=m.user_phone_number;b=widgetPrefsJSON.phone_systems_json}if((j!==undefined&&j!=null&&j.length>0&&g!==undefined&&g!=null&&g.length>0)||(b!==undefined&&b!=null)){appendCallUsTobody(g,j);clickdeskLog(m);showCallOption()}else{hideCallOption()}}catch(d){clickdeskLog(d)}setElementStyleByID("clickdesk_footer",{display:"none"});clickdeskElementWrap(".clickdesk_b").removeClass("min");if(f!==undefined&&f!=null){f=JSON.parse(f);var l=f.visitor_token;clickdeskLog(a);deletePrefs(SESSION_COOKIE_NAME);deletePrefs(CHANNEL_ID);deletePrefs("active_session");try{deletePrefs(CLICKDESK_USER_SESSION_RATING);clickdeskElementWrap("#cd_user_rating a").removeClass("cd-done");clickdeskElementWrap("#cd_user_rating a").addClass("cd-undone");document.getElementById("cd_rating").innerHTML="0";setElementStyleByID("clickdesk_ratingdiv",{display:"none"});setElementStyleByID("cd_user_rating",{display:"none"})}catch(d){}var k={};k.command="chat_closed";k.visitor_token=l;if(a!==undefined&&a!=null&&a!=""){k.visitor_email=a}var c=constructSnackRequest(k,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(c,function(n){})}}catch(d){clickdeskLog("deleteSession Error "+d)}}function showCallOption(){clickdeskLog("showCallOption");document.getElementById("cd_phone").parentNode.style.display="block"}function hideCallOption(){try{document.getElementById("cd_phone").parentNode.style.display="none"}catch(a){clickdeskLog("hideCallOption = "+a)}}function appendCallUsTobody(e,h){clickdeskLog("if only");var b="getlivechat";var c=window.location.href;var d={};d.forwardType=h;d.forwardValue1=e;var g="?invoxid="+b+"&clientURL="+c+"&customJSON="+JSON.stringify(d);var a=widgetPrefsJSON.white_label_image_prefs;if(a!==undefined&&a!=null){g+="&whitelabelJSON="+JSON.stringify(a)}clickdeskLog(g);var f=widgetPrefsJSON.phone_systems_json;if(f!=null&&f!==undefined){CLICKDESK_PUSH2CALL_SOURCE=CLICKDESK_PUSH2CALL_SOURCE.replace("_v4","_v5");g+="&phonesystems="+JSON.stringify(f)}clickdeskLog(CLICKDESK_PUSH2CALL_SOURCE);if((CLICKDESK_PUSH2CALL_SOURCE.indexOf("?")>0)){CLICKDESK_PUSH2CALL_SOURCE=CLICKDESK_PUSH2CALL_SOURCE.substring(0,CLICKDESK_PUSH2CALL_SOURCE.indexOf("?"))}CLICKDESK_PUSH2CALL_SOURCE=CLICKDESK_PUSH2CALL_SOURCE+g;clickdeskLog(CLICKDESK_PUSH2CALL_SOURCE);clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].src=""}function showOfflineLink(){removeElement("clickdesk_session","cd_remove");var a=document.getElementById("cd_rewrite").cloneNode(true);a.id="";a.className="cd_remove";a.innerHTML='<span id="session_timeout_link" onclick="showOfflineForm();" style="color:#0096C0 !important;cursor:pointer;font-size:13px;font-style:italic;color:#000;">['+CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_agent_exceeded_time_label))+"]</span>";setElementStyleByObject(a,{display:"block"});document.getElementById("clickdesk_session").appendChild(a)}function setagentNameandimage(b,c){c=glcp+c.substring(c.indexOf("://")+3);var d=clickdeskElementWrap(".cd_agent_name");snack.each(d,function(e){if(e.length!=0){e.innerHTML=b}});var a=clickdeskElementWrap(".cd_agent_image");snack.each(a,function(e){if(e.length!=0){e.src=c}})}function showClickDeskChatLoading(){document.getElementById("clickdesk_session").innerHTML="";document.getElementById("clickdesk_session").style.height="170px";document.getElementById("clickdesk_session").innerHTML='<img src="'+CLICKDESK_STATIC_AMAZON_IMAGE_URL+'/images/archiveLoad.gif"  style="position:absolute;top:35%;left:38%;display:block;" />'}function hideClickDeskChatLoading(){document.getElementById("clickdesk_session").innerHTML="";document.getElementById("clickdesk_session").style.height="auto"}function clickDeskAutoPopup(){setElementStyleByID("clickdesk_container",{display:"block"});setElementStyleByID("clickdesk_popup",{bottom:"0px"});showChatBox();cdSetFocus()}function cdSetFocus(){try{document.broadcastchatForm.broadcastchat.focus()}catch(a){clickdeskLog(a)}}function cd_checkDefault(b){var a=b.previousSibling;a.style.display="none";if(b.value==cd_DEFAULT_MSGS[b.id]){b.value=""}if(!(cd_ie_browser_version<=7)){document.getElementById("csChatSendForm").style.backgroundColor="#f9f5da";if(cd_ie_browser_version>7){document.getElementById("csChatSendForm").style.backgroundColor="#f4e794"}}}function cd_setDefault(b){var a=b.previousSibling;if(b.value==""){a.style.display="block"}else{a.style.display="none"}if(!(cd_ie_browser_version<=7)){document.getElementById("csChatSendForm").style.backgroundColor="#f4e794"}}function cd_checkDefaultInput(b){var a=b.nextSibling;while(a&&a.nodeType!=1){a=a.nextSibling}a.focus()}function cd_onfocus(a){a.onfocus=function(){cd_checkDefault(a)};a.onblur=function(){cd_setDefault(a)}}function cd_spanClick(a){a.onclick=function(){cd_checkDefaultInput(a)}}function cd_rating_click2(a){a.onclick=function(b){try{setClickdeskRating2(a,b)}catch(c){clickdeskLog("rating error = "+c)}}}function CD_Smilies_Hover(a){a.onmouseover=function(b){try{CD_Set_Smily_Image(a,b)}catch(c){clickdeskLog("smily hover error = "+c)}}}function CD_Smilies_Click(a){a.onclick=function(b){try{CD_Set_Smily_Image(a,b,"clicked")}catch(c){clickdeskLog("smily click error = "+c)}}}function cd_hideloading(){try{clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none"}catch(a){}}document.body.onclick=clickdeskHandleClick;function clickdeskHandleClick(c){c=c||event;var b=c.srcElement||c.target||element.toElement;try{var d="";if(b!==undefined){if(c.srcElement!==undefined){d=c.srcElement.id}else{if(c.target!==undefined){d=c.target.id}else{if(c.toElement!==undefined){d=c.toElement.id}}}if(d!==undefined&&d!=null&&d!="cd_smile"){document.getElementById("clickdesk_smilediv").style.display="none";document.getElementById("cd_smile").className="cd-smile"}}}catch(a){clickdeskLog("eerr in body click = "+a)}}function CD_Set_Smily_Image(c,g,f){if(c!=undefined&&c!=null){var a="";var e=c.className;if(e!==undefined&&e!=null&&e.length>0){for(var b in CLICKDESK_EMOTIONS1){if(CLICKDESK_EMOTIONS1[b]==e){a=b;break}}}document.getElementById("cd_set_smilyName").innerHTML=e.replace("cd-","");document.getElementById("cd_set_smilySymbol").innerHTML=a}var d=document.getElementById("broadcastchat").getAttribute("disabled");if(f!==undefined&&(d===undefined||d==null||d=="")){setElementStyleByID("clickdesk_smilediv",{display:"none"});document.getElementById("cd_smile").className="cd-smile";document.getElementById("broadcastchat").value=document.getElementById("broadcastchat").value+a;document.getElementById("broadcastchat").focus()}}function setClickdeskRating2(element,eve){var eve=eve||event;eve.returnValue=false;if(element!=undefined&&element!=null){var rate=element.rel;if(rate!==undefined&&rate!=null){rate=parseInt(rate);clickdeskElementWrap("#cd_user_rating a").removeClass("cd-done");clickdeskElementWrap("#cd_user_rating a").addClass("cd-undone");var ratings=clickdeskElementWrap("#cd_user_rating a");for(var i=0;i<ratings.length;i++){var element=ratings[i];if(i==rate){break}element.className="cd-done"}document.getElementById("cd_rating").innerHTML=rate;var sessionJSON=getActiveSession();if(sessionJSON!=null){var sessionId=eval("sessionJSON."+SESSION_ID);if(sessionId.indexOf("BD")==0){return false}var json={};json.command="user_rate";json.session_id=sessionId;json.user_message=" ";var rate=document.getElementById("cd_rating").innerHTML;clickdeskLog("rate ="+rate);var send=false;var userrate=CLICKDESK_readCookie(CLICKDESK_USER_SESSION_RATING);clickdeskLog("userrate ="+userrate);if((userrate==null||userrate===undefined)&&(parseInt(rate)>0)){CLICKDESK_createCookie(CLICKDESK_USER_SESSION_RATING,rate);json.user_rate=rate;send=true}userrate=CLICKDESK_readCookie(CLICKDESK_USER_SESSION_RATING);clickdeskLog("userrate = "+userrate);if((userrate!=null&&userrate!==undefined)&&(parseInt(rate)!=parseInt(userrate))&&(parseInt(rate)!=0)){CLICKDESK_createCookie(CLICKDESK_USER_SESSION_RATING,rate);json.user_rate=rate;send=true}if(send){var params=constructSnackRequest(json,CLICKDESK_SERVER_PATH+"/visitor");clickdeskLog(params);snack.JSONP(params,function(response){LivilyLog("Rating sent "+rate)})}}}}}function initializeOptions(){clickdeskLog("initializeOptions");cd_DEFAULT_MSGS.cd_offline_msg=clickdeskElementWrap("#cd_offline_msg")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS.cd_offline_name=clickdeskElementWrap("#cd_offline_name")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS.cd_offline_email=clickdeskElementWrap("#cd_offline_email")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS.cd_prechat_msg=clickdeskElementWrap("#cd_prechat_msg")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS.cd_prechat_name=clickdeskElementWrap("#cd_prechat_name")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS.cd_prechat_email=clickdeskElementWrap("#cd_prechat_email")[0].previousSibling.innerHTML;if(document.getElementById("cd_prechat_custom")!==undefined&&document.getElementById("cd_prechat_custom")!=null){cd_DEFAULT_MSGS.cd_prechat_custom=clickdeskElementWrap("#cd_prechat_custom")[0].previousSibling.innerHTML}cd_DEFAULT_MSGS.broadcastchat=clickdeskElementWrap("#broadcastchat")[0].value;cd_DEFAULT_MSGS["cd-sendEmailToVistorName"]=clickdeskElementWrap("#cd-sendEmailToVistorName")[0].previousSibling.innerHTML;cd_DEFAULT_MSGS["cd-sendEmailToVistorEmail"]=clickdeskElementWrap("#cd-sendEmailToVistorEmail")[0].previousSibling.innerHTML;clickdeskAttachEvent("a#clickdesk_min","click",function(event){event.returnValue=false;CD_Live_Chat.minimize()});clickdeskAttachEvent("a#clickdesk_close","click",function(event){event.returnValue=false;CD_Live_Chat.close()});if(nodeValid("clickdesk_popout")){clickdeskAttachEvent("a#clickdesk_popout","click",function(event){event.returnValue=false;CD_Live_Chat.popout()})}if(nodeValid("clickdesk_bub")){clickdeskAttachEvent("#clickdesk_bub","click",function(event){showLivechatPopup()})}var inputs=clickdeskElementWrap("#clickdesk_popup input");for(var i=0;i<inputs.length;i++){var element=inputs[i];if(inputs[i].type!="submit"&&inputs[i].type!="button"){if(element.id!="broadcastchat"){cd_onfocus(element)}}}var textareas=clickdeskElementWrap("#clickdesk_popup textarea");for(var i=0;i<textareas.length;i++){var element=textareas[i];cd_onfocus(element)}var spans=clickdeskElementWrap("#clickdesk_popup span");clickdeskLog(spans);for(var i=0;i<spans.length;i++){var element=spans[i];if(spans[i].className=="cd_input_field_span"){cd_spanClick(element)}}var cdesk=clickdeskElementWrap("#clickdesk_footer_tabs a");for(var i=0;i<cdesk.length-1;i++){var id=cdesk[i].id;clickdeskAttachEvent("#"+id,"click",function(element){var id;element.returnValue=false;if(element.srcElement!==undefined||element.target!==undefined||element.toElement!==undefined){if(element.srcElement!==undefined){id=element.srcElement.id}else{if(element.target!==undefined){id=element.target.id}else{if(element.toElement!==undefined){id=element.toElement.id}}}if(nodeValid(id)){clickdeskElementWrap("#clickdesk_footer_tabs li").removeClass("ClickDeskActive");clickdeskElementWrap("#"+id)[0].parentNode.className="ClickDeskActive";showCdSocial(id)}}})}if(nodeValid("clickdesk_tool")){clickdeskAttachEvent("#clickdesk_tool","click",function(element){showLivechatPopup()})}if(nodeValid("livilyChatLink")){clickdeskAttachEvent("#livilyChatLink","click",function(element){showLivechatPopup()})}try{var links=clickdeskElementWrap(".ClickdeskChatLink");for(var i=0;i<links.length;i++){var element=links[i];if(element!=undefined&&links!=null){element.onclick=function(event){showLivechatPopup()}}}}catch(err){clickdeskLog(err)}try{addlivilyEvent("cd_rating","click",function(event){event.returnValue=false;if(document.getElementById("clickdesk_ratingdiv").style.display=="block"){document.getElementById("clickdesk_ratingdiv").style.display="none"}else{document.getElementById("clickdesk_ratingdiv").style.display="block"}})}catch(e){clickdeskLog("Error in rating : "+e)}try{var anchors=clickdeskElementWrap("#cd_user_rating a");for(var i=0;i<anchors.length;i++){var element=anchors[i];cd_rating_click2(element)}}catch(err){clickdeskLog(err)}try{var smilies=clickdeskElementWrap("#clickdesk_smilediv span");for(var i=0;i<smilies.length;i++){var element=smilies[i];CD_Smilies_Hover(element)}}catch(err){clickdeskLog(err)}try{var smiliesClick=clickdeskElementWrap("#clickdesk_smilediv span");for(var i=0;i<smiliesClick.length;i++){var element=smiliesClick[i];CD_Smilies_Click(element)}}catch(err){clickdeskLog(err)}clickdeskAttachEvent("#cd_smile","click",function(event){event.returnValue=false;try{if(clickdeskElementWrap("#clickdesk_smilediv")[0].style.display=="block"){clickdeskElementWrap("#clickdesk_smilediv")[0].style.display="none";document.getElementById("cd_smile").className="cd-smile"}else{clickdeskElementWrap("#clickdesk_smilediv")[0].style.display="block";document.getElementById("cd_smile").className="cd-smile-hover"}}catch(err){clickdeskLog("err = "+err)}});addlivilyEvent("cd_prechat_msg","keydown",function(event){if(event.keyCode==13||event.keyCode==10){document.getElementById("cd_prechat_msg").blur();document.getElementById("cd_prechat_button").click();try{if(event.stopPropagation){event.stopPropagation()}else{event.cancelBubble=true}}catch(err){}return false}});String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};clickdeskAttachEvent("#clickdesk_online_submit","click",function(event){event.returnValue=false;try{document.getElementById("cd_prechat_button").click()}catch(err){clickdeskLog("err = "+err)}});clickdeskAttachEvent("#clickdesk_offline_submit","click",function(event){event.returnValue=false;try{document.getElementById("cd_offline_button").click()}catch(err){clickdeskLog("err = "+err)}});clickdeskAttachEvent("#clickdesk_etv_submit","click",function(event){event.returnValue=false;try{document.getElementById("emailChatTsToVisitor_submit").click()}catch(err){clickdeskLog("err = "+err)}});clickdeskAttachEvent("#clickdesk_etv_cancel","click",function(event){event.returnValue=false;try{document.getElementById("cd_emailToVistitor_cancel").click()}catch(err){clickdeskLog("err = "+err)}});clickdeskAttachEvent("#cd_emailToVistitor_acl","click",function(event){event.returnValue=false;showChatBox()});clickdeskAttachEvent("#clickdesk_chatsend","click",function(event){event.returnValue=false;try{document.getElementById("broadcastchatsend").click()}catch(err){clickdeskLog("err = "+err)}});clickdeskAttachEvent("#cd_voice","click",function(event){event.returnValue=false;try{if(hasClass("#cd_voice","cd-mute")){clickdeskElementWrap("#cd_voice").removeClass("cd-mute");sound=true}else{clickdeskElementWrap("#cd_voice").addClass("cd-mute");sound=false}}catch(err){clickdeskLog("err = "+err)}});addlivilyEvent("cd_emailToVistitor_cancel","click",function(event){showChatBox()});addlivilyEvent("cd_email","click",function(event){event.returnValue=false;showEmailChatToVisitorForm()});clickdeskAttachEvent("#cd_offline_button","click",function(event){resetForm1();var offlineName=document.getElementById("cd_offline_name").value;var offlineEmail=document.getElementById("cd_offline_email").value;var offlineMessage=document.getElementById("cd_offline_msg").value;if(CLICKDESK_OFFLINEFORM_NAME||(offlineName.length>0||offlineName!=cd_DEFAULT_MSGS.cd_offline_name)){if(OFFLINE_FIRSTFIELDEMAILVSTEXT=="email"){if(!isValidEmailAddress(offlineName)){document.getElementById("cd_offline_name").style.borderColor="red";document.getElementById("cd_offline_name").focus();return false}}else{if(CLICKDESK_OFFLINEFORM_NAME&&(offlineName.length==0||offlineName==cd_DEFAULT_MSGS.cd_offline_name)){document.getElementById("cd_offline_name").style.borderColor="red";document.getElementById("cd_offline_name").focus();return false}}}if(CLICKDESK_OFFLINEFORM_EMAIL||(offlineEmail.length>0&&offlineEmail!=cd_DEFAULT_MSGS.cd_offline_email)){if(OFFLINE_SECONDFIELDEMAILVSTEXT=="email"){if(!isValidEmailAddress(offlineEmail)){document.getElementById("cd_offline_email").style.borderColor="red";document.getElementById("cd_offline_email").focus();return false}}else{if(CLICKDESK_OFFLINEFORM_EMAIL&&(offlineEmail.length==0||offlineEmail==cd_DEFAULT_MSGS.cd_offline_email)){document.getElementById("cd_offline_email").style.borderColor="red";document.getElementById("cd_offline_email").focus();return false}}}if(offlineMessage.length==0||offlineMessage==cd_DEFAULT_MSGS.cd_offline_msg){document.getElementById("cd_offline_msg").style.borderColor="red";document.getElementById("cd_offline_msg").focus();return false}else{resetForm1();var json={};json.command="new_offline_message";json.visitor_info=getVisitorInfo();json.widget_id=CLICKDESK_WIDGET_ID;var name_label=OFFLINE_NAME_LABEL;var email_label=OFFLINE_EMAIL_LABEL;if((offlineName.length!=0||offlineName!==undefined)&&offlineEmail!=cd_DEFAULT_MSGS.cd_offline_name){json.visitor_name=offlineName}if((offlineEmail.length!=0||offlineEmail!==undefined)&&offlineEmail!=cd_DEFAULT_MSGS.cd_offline_email){json.visitor_email=offlineEmail}json.visitor_offline_message=offlineMessage;var fieldsArray=new Array();var offlineJSON=widgetPrefsJSON.offline_form_prefs;if(offlineJSON!==undefined&&offlineJSON!==null){if(offlineJSON.offline_form_name_label!==undefined||offlineJSON.offline_form_name_label!=null){name_label=(offlineJSON.offline_form_name_label)}if(offlineJSON.offline_form_email_label!==undefined||offlineJSON.offline_form_email_label!=null){email_label=(offlineJSON.offline_form_email_label)}}if(offlineName!==undefined&&offlineName!=null){json.visitor_name=offlineName;var field1={};field1.fieldName=name_label;field1.fieldValue=offlineName;fieldsArray.push(field1)}if(offlineEmail!==undefined&&offlineEmail!=null){json.visitor_email=offlineEmail;var field2={};field2.fieldName=email_label;field2.fieldValue=offlineEmail;fieldsArray.push(field2)}try{var strigifyString="[";for(var i=0;i<fieldsArray.length;i++){if(i!=(fieldsArray.length-1)){strigifyString=strigifyString+JSON.stringify(fieldsArray[i])+","}else{strigifyString=strigifyString+JSON.stringify(fieldsArray[i])}}strigifyString=strigifyString+"]";json.offline_fields=strigifyString}catch(err){}if(offlineEmail!=cd_DEFAULT_MSGS.cd_offline_email){visitorEmail=offlineEmail}else{visitorEmail=""}if(offlineName!=cd_DEFAULT_MSGS.cd_offline_name){visitorName=offlineName}else{visitorName=""}CLICKDESK_createCookie("visitor_email",visitorEmail,10);CLICKDESK_createCookie("visitor_name",visitorName,10);document.getElementById("cd_offline_button").setAttribute("disabled",true);document.getElementById("cd_loading").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_send_request_label));document.getElementById("cd_loading").style.display="inline";var params=constructSnackRequest(json,CLICKDESK_SERVER_PATH+"/visitor");try{snack.JSONP(params,function(response){if(response.status=="success"){document.getElementById("cd_offline_button").removeAttribute("disabled");document.getElementById("ClickdeskofflineForm").style.display="none";document.getElementById("ClickdeskofflinethxMsg").style.display="block";document.getElementById("ClickdeskofflinethxMsgName").innerHTML="Hey "+CLICKDESK_readCookie("visitor_name")+",";document.getElementById("ClickdeskofflineSucsMsg").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.offline_send_success_label))}else{document.getElementById("cd_offline_button").removeAttribute("disabled");document.getElementById("cd_loading").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_send_failure_mssg_label))}})}catch(err){clickdeskLog(err)}}});clickdeskAttachEvent("#cd_prechat_button","click",function(event){resetForm1();var prechatName=document.getElementById("cd_prechat_name").value;var prechatEmail=document.getElementById("cd_prechat_email").value;var prechatMessage=document.getElementById("cd_prechat_msg").value;if(document.getElementById("cd_prechat_custom")!==undefined&&document.getElementById("cd_prechat_custom")!=null){prechatCustom=document.getElementById("cd_prechat_custom").value}if(CLICKDESK_ONLINEFORM_NAME||(prechatName.length>0||prechatName!=cd_DEFAULT_MSGS.cd_prechat_name)){if(PRECHAT_FIRSTFIELDEMAILVSTEXT=="email"){if(!isValidEmailAddress(prechatName)){document.getElementById("cd_prechat_name").style.borderColor="red";document.getElementById("cd_prechat_name").focus();document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_email_field_label));document.getElementById("cd_valid_email").style.visibility="visible";return false}}else{if(CLICKDESK_ONLINEFORM_NAME&&(prechatName.length==0||prechatName==cd_DEFAULT_MSGS.cd_prechat_name)){document.getElementById("cd_prechat_name").style.borderColor="red";document.getElementById("cd_prechat_name").focus();document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_name_field_label));document.getElementById("cd_valid_email").style.visibility="visible";return false}}}if(CLICKDESK_ONLINEFORM_EMAIL||(prechatEmail.length>0&&prechatEmail!=cd_DEFAULT_MSGS.cd_prechat_email)){if(PRECHAT_SECONDFIELDEMAILVSTEXT=="email"){if(!isValidEmailAddress(prechatEmail)){document.getElementById("cd_prechat_email").style.borderColor="red";document.getElementById("cd_prechat_email").focus();document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_email_field_label));document.getElementById("cd_valid_email").style.visibility="visible";return false}}else{if(CLICKDESK_ONLINEFORM_EMAIL&&(prechatEmail.length==0||prechatEmail==cd_DEFAULT_MSGS.cd_prechat_email)){document.getElementById("cd_prechat_email").style.borderColor="red";document.getElementById("cd_prechat_email").focus();document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_name_field_label));document.getElementById("cd_valid_email").style.visibility="visible";return false}}}if(CLICKDESK_ONLINEFORM_CUSTOM_FIELD!==undefined&&CLICKDESK_ONLINEFORM_CUSTOM_FIELD=="yes"){if(CLICKDESK_ONLINEFORM_CUSTOM_FIELD_REQUIRED||(prechatCustom.length>0&&prechatCustom!=cd_DEFAULT_MSGS.cd_prechat_custom)){if(PRECHAT_CUSTOMFIELDEMAILVSTEXT=="email"){if(!isValidEmailAddress(prechatCustom)){document.getElementById("cd_prechat_custom").style.borderColor="red";document.getElementById("cd_prechat_custom").focus();document.getElementById("cd_valid_email").style.visibility="visible";document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_email_field_label));return false}}else{if(prechatCustom.length==0||prechatCustom==cd_DEFAULT_MSGS.cd_prechat_custom){document.getElementById("cd_prechat_custom").style.borderColor="red";document.getElementById("cd_prechat_custom").focus();document.getElementById("cd_valid_email").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_name_field_label));document.getElementById("cd_valid_email").style.visibility="visible";return false}}}}if(prechatMessage.length==0||prechatMessage==cd_DEFAULT_MSGS.cd_prechat_msg){document.getElementById("cd_prechat_msg").style.borderColor="red";document.getElementById("cd_prechat_msg").focus();cdAppendText(document.getElementById("cd_valid_email"),CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_message_field_label)));document.getElementById("cd_valid_email").style.visibility="visible";return false}else{resetForm1();var text=document.getElementById("cd_prechat_msg").value;sendMessage(text,CLICKDESK_CHAT_AGENT_NAME,"broadCast");showChatBox();if(prechatEmail!=cd_DEFAULT_MSGS.cd_prechat_email){visitorEmail=prechatEmail}else{visitorEmail=""}if(prechatName!=cd_DEFAULT_MSGS.cd_prechat_name){visitorName=prechatName}else{visitorName=""}CLICKDESK_createCookie("visitor_email",visitorEmail,10);CLICKDESK_createCookie("visitor_name",visitorName,10)}});clickdeskAttachEvent("#emailChatTsToVisitor_submit","click",function(event){resetForm1();var sessionJSON=getActiveSession();if(sessionJSON){var sessionId=eval("sessionJSON."+SESSION_ID);if(sessionId){var name=document.getElementById("cd-sendEmailToVistorName").value;var email=document.getElementById("cd-sendEmailToVistorEmail").value;if(!isValidEmailAddress(email)){document.getElementById("cd-sendEmailToVistorEmail").style.borderColor="red";document.getElementById("cd-sendEmailToVistorEmail").focus();return false}else{document.getElementById("cd_emailToVistitor_status").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_send_request_label));document.getElementById("emailChatTsToVisitor_submit").setAttribute("disabled",true);var json={};if(name.length>0&&name!=cd_DEFAULT_MSGS["cd-sendEmailToVistorName"]){json.visitor_name=name}json.visitor_email=email;json.command="send_chat_trascript_to_visitor";json.widget_id=CLICKDESK_WIDGET_ID;json.visitor_token=eval("sessionJSON."+SESSION_VISITOR);json.session_id=sessionId;var params=constructSnackRequest(json,CLICKDESK_SERVER_PATH+"/visitor");snack.JSONP(params,function(response){document.getElementById("emailChatTsToVisitor_submit").removeAttribute("disabled");if(response.status!="success"){document.getElementById("cd_emailToVistitor_status").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_send_failure_mssg_label))}else{showChatBox()}})}}else{document.getElementById("cd_emailToVistitor_status").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_nosession_label))}}else{document.getElementById("cd_emailToVistitor_status").innerHTML=CLICKDESKReplaceSpecialCharacters((WIDGET_CUSTOM_MESSAGES.customstatusmssgs_nosession_label))}});clickdeskLog("End Of initializeOptions")}function divHover(b){if(b!=null&&b!==undefined){b=b.firstChild}if(b!=null&&b!==undefined){for(var a=0;a<b.childNodes.length-1;a++){if(b.childNodes[a].id=="cd_date"){b.childNodes[a].style.visibility="visible"}}}}function divOut(b){if(b!=null&&b!==undefined){b=b.firstChild}if(b!=null&&b!==undefined){for(var a=0;a<b.childNodes.length-1;a++){if(b.childNodes[a].id=="cd_date"){b.childNodes[a].style.visibility="hidden"}}}}function resetForm1(){var b=clickdeskElementWrap("#clickdesk_popup input");for(var a=0;a<b.length;a++){if(b[a].type!="button"&&b[a].type!="submit"){b[a].style.borderColor="#CCC";b[a].blur()}}clickdeskElementWrap("#cd_valid_email")[0].style.visibility="hidden";clickdeskElementWrap("#offline_valid_email")[0].style.visibility="hidden"}function isValidEmailAddress(d){var c=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);var e=d.split(",");for(var b=0;b<e.length;b++){e[b]=e[b].replace(/^\s*/,"").replace(/\s*$/,"");var a=c.test(e[b]);if(!a){return false}}return true}function showChatBox(){try{clickdeskElementWrap("#clickdesk_session")[0].style.display="block";setElementStyleByID("clickdesk_ratingdiv",{display:"none"});cdShowAgentDetailsTop();setElementStyleByID("clickdesk_chat_session",{display:"block"});clickdeskElementWrap("#cd_valid_email")[0].style.visibility="hidden";clickdeskElementWrap("#ClickdeskofflineForm")[0].style.display="none";setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});clickdeskElementWrap("#ClickdeskprechatForm")[0].style.display="none";clickdeskElementWrap("#emailChatTsToVisitorForm")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template div")[0].innerHTML="";clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src="";setElementStyleByID("clickdesk_footer",{display:"block"});setElementStyleByID("clickdesk_footer_tabs",{display:"block"});clickdeskElementWrap("#clickdesk_footer_tabs li").removeClass("ClickDeskActive");clickdeskElementWrap("#cd_chat")[0].parentNode.className="ClickDeskActive";hideBubble();clickdeskElementWrap("#clickdesk_container")[0].style.display="block";var b=document.getElementById("clickdesk_popup").offsetHeight;livilySlideUP(b,livilyShow)}catch(a){clickdeskLog("showChatBox"+a)}}function showOfflineForm(){try{clickdeskElementWrap("#clickdesk_session")[0].style.display="none";setElementStyleByID("clickdesk_chat_session",{display:"none"});cdShowAgentDetailsTop();clickdeskElementWrap("#cd_valid_email")[0].style.visibility="hidden";clickdeskElementWrap("#ClickdeskprechatForm")[0].style.display="none";clickdeskElementWrap("#ClickdeskofflineForm")[0].style.display="block";setElementStyleByObject(clickdeskElementWrap("#ClickdeskofflineForm  form")[0],{display:"block"});setElementStyleByID("offlinethxmsg",{display:"none"});setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});clickdeskElementWrap("#emailChatTsToVisitorForm")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template div")[0].innerHTML="";clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src="";clickdeskElementWrap("#cd_loading")[0].style.display="none";setElementStyleByID("loadingp",{marginTop:"-6px"});setElementStyleByID("clickdesk_footer_tabs",{display:"none"});document.getElementById("cd_offline_msg").value="";visitorEmail=CLICKDESK_readCookie("visitor_email");visitorName=CLICKDESK_readCookie("visitor_name");clickdeskElementWrap("#cd_offline_msg")[0].value="";if(visitorEmail!==undefined&&visitorEmail!==null){clickdeskElementWrap("#cd_offline_email")[0].value=visitorEmail}if(visitorName!==undefined&&visitorName!==null){clickdeskElementWrap("#cd_offline_name")[0].value=visitorName}var b=widgetPrefsJSON.javascript_plugin_prefs;if(b!=null&&b!==undefined){for(var a in b){if(a.indexOf("_value")!=-1){assignPluginVarToInput(b,b[a])}}}setElementStyleByID("clickdesk_footer",{display:"none"});hideBubble();clickdeskElementWrap("#clickdesk_container")[0].style.display="block";var d=document.getElementById("clickdesk_popup").offsetHeight;livilySlideUP(d,livilyShow)}catch(c){clickdeskLog("showOfflineForm"+c)}}function showPrechatForm(){try{clickdeskElementWrap("#clickdesk_session")[0].style.display="none";setElementStyleByID("clickdesk_chat_session",{display:"none"});cdShowAgentDetailsTop();clickdeskElementWrap("#ClickdeskofflineForm")[0].style.display="none";setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});clickdeskElementWrap("#emailChatTsToVisitorForm")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template div")[0].innerHTML="";clickdeskElementWrap("#clickdeskchat_social_template div")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src="";setElementStyleByID("clickdesk_footer",{display:"none",position:"relative"});setElementStyleByID("clickdesk_footer_tabs",{display:"none"});if(PRECHAT_REFILL_FORM_FILEDS=="yes"){visitorEmail=CLICKDESK_readCookie("visitor_email");visitorName=CLICKDESK_readCookie("visitor_name");if(visitorEmail!==undefined&&visitorEmail!==null){clickdeskElementWrap("#cd_prechat_email")[0].value=visitorEmail}if(visitorName!==undefined&&visitorName!==null){clickdeskElementWrap("#cd_prechat_name")[0].value=visitorName}}else{clickdeskElementWrap("#cd_prechat_email")[0].value="";clickdeskElementWrap("#cd_prechat_name")[0].value="";if(document.getElementById("cd_prechat_custom")!==undefined&&document.getElementById("cd_prechat_custom")!=null){document.getElementById("cd_prechat_custom").value=""}}clickdeskElementWrap("#cd_prechat_msg")[0].value="";if(PRECHAT_REFILL_FORM_FILEDS=="yes"){var d=CLICKDESK_readCookie("visitor_mssg");if(d!==undefined&&d!==null){clickdeskElementWrap("#cd_prechat_msg")[0].value=d}}var b=widgetPrefsJSON.javascript_plugin_prefs;if(b!=null&&b!==undefined){for(var a in b){if(a.indexOf("_value")!=-1){assignPluginVarToInput(b,b[a])}}}hideBubble();clickdeskElementWrap("#ClickdeskprechatForm")[0].style.display="block";setElementStyleByID("ClickdeskprechatForm",{position:"relative",zIndex:"10000"});clickdeskElementWrap("#clickdesk_container")[0].style.display="block";var e=document.getElementById("clickdesk_popup").offsetHeight;livilySlideUP(e,livilyShow)}catch(c){clickdeskLog("showPrechatForm "+c)}}function assignPluginVarToInput(e,f){if(isvalidPlugin(f)&&evalJavascriptExp(f)!="unknown"){var b=clickdeskElementWrap("#clickdesk_popup input");for(var d=0;d<b.length;d++){var c=b[d];if(b[d].type!="submit"&&b[d].type!="button"){var a=cd_DEFAULT_MSGS[c.id];a=a.replace(/ /g,"");if(a==f){b[d].value=evalJavascriptExp(f)}}}}}function showEmailChatToVisitorForm(){try{clickdeskElementWrap("#clickdesk_session")[0].style.display="none";setElementStyleByID("clickdesk_chat_session",{display:"none"});cdShowAgentDetailsTop();clickdeskElementWrap("#ClickdeskofflineForm")[0].style.display="none";setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});clickdeskElementWrap("#ClickdeskprechatForm")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template div")[0].innerHTML="";clickdeskElementWrap("#clickdeskchat_social_template div")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src="";setElementStyleByID("clickdesk_footer",{display:"none",position:"relative"});setElementStyleByID("clickdesk_footer_tabs",{display:"none"});if(PRECHAT_REFILL_FORM_FILEDS=="yes"){visitorEmail=CLICKDESK_readCookie("visitor_email");visitorName=CLICKDESK_readCookie("visitor_name");if(visitorEmail!==undefined&&visitorEmail!==null){clickdeskElementWrap("#cd-sendEmailToVistorEmail")[0].value=visitorEmail}if(visitorName!==undefined&&visitorName!==null){clickdeskElementWrap("#cd-sendEmailToVistorName")[0].value=visitorName}}else{clickdeskElementWrap("#sendEmailToVistorEmail")[0].value="";clickdeskElementWrap("#sendEmailToVistorName")[0].value=""}hideBubble();clickdeskElementWrap("#emailChatTsToVisitorForm")[0].style.display="block";document.getElementById("cd_emailToVistitor_status").innerHTML="";setElementStyleByID("emailChatTsToVisitorForm",{position:"relative",zIndex:"1000"});clickdeskElementWrap("#cd-sendEmailToVistorEmail")[0].focus();clickdeskElementWrap("#cd-sendEmailToVistorEmail")[0].blur();clickdeskElementWrap("#cd-sendEmailToVistorName")[0].focus();clickdeskElementWrap("#cd-sendEmailToVistorName")[0].blur();clickdeskElementWrap("#clickdesk_container")[0].style.display="block";var b=document.getElementById("clickdesk_popup").offsetHeight;livilySlideUP(b,livilyShow)}catch(a){clickdeskLog("showOfflineForm"+a)}}function hideBubble(){try{clickdeskElementWrap("#clickdesk_bub")[0].style.display="none";clickdeskElementWrap("#clickdesk_tool")[0].style.display="none"}catch(a){clickdeskLog("hideBubble ="+a)}}function showLivechatPopup(){clearTimeout(CLICKDESK_TIME);CLICKDESK_createCookie("active_popup","active");CD_Live_Chat.show()}function cdTwitterCb(h){clickdeskLog(h);var g=document.getElementsByTagName("body")[0];var a=document.createElement("script");a.type="text/javascript";a.src=CLICKDESK_SERVER_PROTOCOL+"platform.twitter.com/widgets.js";g.appendChild(a);var c=[];for(var f=0;f<h.length;f++){var e=h[f].user.screen_name;var b="",d="";var j=h[f].retweeted_status;if(j!=undefined&&j!=null){e=j.user.screen_name;if(IS_CD_SSL){b=j.user.profile_image_url_https}else{b=j.user.profile_image_url}}else{e=h[f].user.screen_name;if(IS_CD_SSL){b=h[f].user.profile_image_url_https}else{b=h[f].user.profile_image_url}}if(IS_CD_SSL){d=h[f].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(k){var l=k.replace("http://","https://");return'<a style="text-decoration: none;" target="_blank" href="'+l+'" >'+l+"</a>"}).replace(/\B@([_a-z0-9]+)/ig,function(k){return k.charAt(0)+'<a style="text-decoration: none;display:inline;" target="_blank" href="https://twitter.com/'+k.substring(1)+'"> '+k.substring(1)+"</a>"})}else{d=h[f].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(k){return'<a style="text-decoration: none;" target="_blank" href="'+k+'" >'+k+"</a>"}).replace(/\B@([_a-z0-9]+)/ig,function(k){return k.charAt(0)+'<a style="text-decoration: none;display:inline;" target="_blank" href="https://twitter.com/'+k.substring(1)+'"> '+k.substring(1)+"</a>"})}c.push('<div class="tweetdiv" ><div class="tweetleft"><img src="'+b+'"/></div><div class="tweetright">'+d+'<a target="_blank" href="https://twitter.com/'+e+"/statuses/"+h[f].id_str+'"><div style="margin:0px;">'+cd_relative_time(h[f].created_at)+"</div></a></div></div>")}clickdeskElementWrap("#clickdesk_twitter")[0].innerHTML=c.join("")}function cd_relative_time(c){var b=c.split(" ");c=b[1]+" "+b[2]+", "+b[5]+" "+b[3];var a=Date.parse(c);var d=(arguments.length>1)?arguments[1]:new Date();var e=parseInt((d.getTime()-a)/1000);e=e+(d.getTimezoneOffset()*60);if(e<60){return"less than a minute ago"}else{if(e<120){return"about a minute ago"}else{if(e<(60*60)){return(parseInt(e/60)).toString()+" minutes ago"}else{if(e<(120*60)){return"about an hour ago"}else{if(e<(24*60*60)){return"about "+(parseInt(e/3600)).toString()+" hours ago"}else{if(e<(48*60*60)){return"1 day ago"}else{return(parseInt(e/86400)).toString()+" days ago"}}}}}}}function checkCDTwitterResponse(b){if(b=="twitter"){if(!twitter_response){clearTimeout(twitter_response_counter);cd_hideloading();var a='<div style="width: 100%;" ><div class="twitterErrorRedUI">We are unable to process your request at this moment. Please verify your '+b+" ID before processing.</div></div>";clickdeskElementWrap("#clickdesk_twitter")[0].innerHTML=a}}else{if(b=="facebook"){if(!facebook_response){clearTimeout(facebook_response_counter);cd_hideloading();clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src=glcp+"www.facebook.com/plugins/fan.php?api_key=200590813294942&connections=12&logobar=false&id= "}}}}function showCdSocial(h){if(h=="cd_twitter"){cdShowSocialNW("twitter");clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template div")[0].style.display="block";clickdeskElementWrap("#clickdesk_twitter")[0].style.display="block";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="block";var f=CLICKDESK_TWITTER_URL.substring(CLICKDESK_TWITTER_URL.lastIndexOf("/")+1);var d=glcp+"api.twitter.com/1/statuses/user_timeline.json";twitter_response=false;twitter_response_counter=setTimeout("checkCDTwitterResponse('twitter');",10000);var b={};b.screen_name=f;b.include_rts=true;var g=constructSnackRequest(b,d);snack.JSONP(g,function(j){twitter_response=true;clearTimeout(twitter_response_counter);clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none";cdTwitterCb(j)})}else{if(h=="cd_chat"){var a=getActiveSession();LivilyLog(a);if(a||CLICKDESK_PROACTIVE_SESSION){showChatBox()}else{if(CLICKDESK_AGENT_STATUS=="offline"){showOfflineForm()}else{showPrechatForm()}}}else{if(h=="cd_phone"){cdShowSocialNW("phone");clickdeskElementWrap("#clickdeskchat_social_template div")[0].style.display="none";clickdeskElementWrap("#clickdesk_twitter")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="block";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="block";var c=clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].src;clickdeskLog(c);clickdeskLog(CLICKDESK_PUSH2CALL_SOURCE);clickdeskLog(decodeURIComponent(c)==CLICKDESK_PUSH2CALL_SOURCE);if(c===undefined||c==null||c.length==0||decodeURIComponent(c)!=CLICKDESK_PUSH2CALL_SOURCE){clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].src=CLICKDESK_PUSH2CALL_SOURCE}else{clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="none"}}else{if(h=="cd_facebook"){cdShowSocialNW("facebook");clickdeskElementWrap("#clickdeskchat_social_template div")[0].style.display="none";clickdeskElementWrap("#clickdesk_twitter")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].style.display="block";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_phone_frame")[0].style.display="none";clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="block";facebook_response=false;facebook_response_counter=setTimeout("checkCDTwitterResponse('facebook');",10000);var e=(CLICKDESK_TEMPLATE=="cd_small_template"||CLICKDESK_TEMPLATE=="cd_small_image_template")?8:12;var b={};b.command="facebook";var g=constructSnackRequest(b,FACEBOOKURL+CLICKDESK_FACEBOOK_URL.substring(CLICKDESK_FACEBOOK_URL.lastIndexOf("/")+1));snack.JSONP(g,function(j){clickdeskLog(j);facebook_response=true;clearTimeout(facebook_response_counter);var k=(j.id!=null&&j.id!=undefined)?j.id:"";clickdeskElementWrap("#clickdeskchat_social_template iframe#cd_facebook_frame")[0].src=glcp+"www.facebook.com/plugins/fan.php?api_key=200590813294942&connections="+e+"&logobar=false&id="+k})}else{if(h=="cd_youtube"){Push2Call.show()}}}}}}function cdShowSocialNW(c){clickdeskElementWrap("#clickdesk_session")[0].style.display="none";setElementStyleByID("clickdesk_chat_session",{display:"none"});clickdeskElementWrap("#ClickdeskofflineForm")[0].style.display="none";setElementStyleByID("ClickdeskofflinethxMsg",{display:"none"});clickdeskElementWrap("#ClickdeskprechatForm")[0].style.display="none";clickdeskElementWrap("#emailChatTsToVisitorForm")[0].style.display="none";var a="";var b="";if(c=="twitter"){a=CLICKDESK_TWITTER_URL.substring(CLICKDESK_TWITTER_URL.lastIndexOf("/")+1);b=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/twitterLogo.png";cdSocialAgentDetailsTop(a,b,true)}else{if(c=="facebook"){a=CLICKDESK_FACEBOOK_URL.substring(CLICKDESK_FACEBOOK_URL.lastIndexOf("/")+1);b=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/facebookLogo.png";cdSocialAgentDetailsTop(a,b,false)}else{if(c=="phone"){a="Call Us";b=CLICKDESK_STATIC_AMAZON_IMAGE_URL+"/images/3-bg.png";cdSocialAgentDetailsTop(a,b,false)}}}clickdeskElementWrap("#clickdeskchat_social_template")[0].style.display="block";clickdeskElementWrap("#clickdeskchat_social_template div")[0].innerHTML="";clickdeskElementWrap("#clickdesk_twitter")[0].innerHTML="";clickdeskElementWrap("#clickdeskchat_social_template big")[0].style.display="block"}function sendClickDeskChatMessage(){try{var b=clickdeskElementWrap("#broadcastchat");var c=b[0].value;c=c.trim();if(c!=undefined&&c!=null&&c.length!=0&&c!=cd_DEFAULT_MSGS.broadcastchat){sendMessage(c,CLICKDESK_CHAT_AGENT_NAME);document.getElementById("broadcastchat").focus()}else{document.getElementById("broadcastchat").focus()}}catch(a){clickdeskLog(a)}return false}function cdShowAgentDetailsTop(){setElementStyleByID("ClickDeskSocialLogo",{display:"none"});setElementStyleByID("cd-liviliyheadingtop",{display:"block"})}function cdSocialAgentDetailsTop(b,c,a){setElementStyleByID("ClickDeskSocialLogo",{display:"block"});setElementStyleByID("cd-liviliyheadingtop",{display:"none"});clickdeskElementWrap("#cd_socialagent_name")[0].innerHTML=b;clickdeskElementWrap("#cd_social_logo")[0].src=c;if(!a){setElementStyleByID("social_nw_fallow_image",{display:"none"})}else{setElementStyleByID("social_nw_fallow_image",{display:"block"})}}try{window.onload=$CLICKDESK}catch(err){}function playRecvSound(){playSound()}function playSendSound(){playSound()}function playSound(){var c=glcpath+"js/sound.mp3";var b=glcpath+"js/sound.wav";var a;try{a=new Audio(c);a.play()}catch(d){clickdeskLog("playSound Error :"+d);try{if(cd_ie_browser_version!==undefined&&cd_ie_browser_version!=null&&cd_ie_browser_version<=9){return}try{if(BrowserDetect.browser=="Firefox"&&BrowserDetect.version<3.6){return}if(FlashDetect.installed){document.getElementById("cd_playsound").innerHTML='<object width="0" height="0"><param name="src" value="'+c+'"><param name="autoplay" value="true"><param name="autostart" value="true"><param name="controller" value="true"><embed src="'+c+'" controller="true" autoplay="true" autostart="True" type="audio/mp3" /></object>'}else{return}}catch(f){}}catch(d){clickdeskLog("playSound in flash :"+d)}}}function getUrlVars(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d}function enableConsoleLogging(){var a=true;if(typeof console==="undefined"||!a){console={log:function(){}}}if(typeof(console.log)==="undefined"||!a){console.log=function(){return 0}}}function LivilyLog(a){enableConsoleLogging();clickdeskLog(a)}function getUnknownVisitorInfo(){var a="unknown";return a}function getVisitorInfo(){var h={};var f=document.location.href;var a=getPrefs(CLICKDESK_REFERRER);if(a==null||a===undefined){a=document.referrer}var j=getPrefs(CD_CLIENT_DETAILS);if(j){if(j){try{h=JSON.parse(j)}catch(d){clickdeskLog("err = "+d)}}else{h={}}}else{h.browser=BrowserDetect.browser;h.browser_version=BrowserDetect.browser;h.os=BrowserDetect.OS;h.flash_installed=FlashDetect.installed;if(FlashDetect.installed){h.flash_version=FlashDetect.raw}if(IS_CD_SSL){h.city=getUnknownVisitorInfo();h.country=getUnknownVisitorInfo();h.country_code=getUnknownVisitorInfo();h.region=getUnknownVisitorInfo();h.latitude=getUnknownVisitorInfo();h.longitude=getUnknownVisitorInfo()}else{h.city=geoip_city();h.country=geoip_country_name();h.country_code=geoip_country_code();h.region=geoip_region_name();h.latitude=geoip_latitude();h.longitude=geoip_longitude()}setPrefs(CD_CLIENT_DETAILS,JSON.stringify(h),3)}if(f!==undefined&&f!=null){h.url=encodeURIComponent(f)}if(a!==undefined&&a!=null&&a!="null"){h.referrer=encodeURIComponent(a)}var b=getPrefs(ARCHIVE_SESSION);try{var e={};var c={};var g=widgetPrefsJSON.javascript_plugin_prefs;if(g!=null&&g!==undefined){if(isvalidPlugin(g.javascript_var1_name)){if(isvalidPlugin(g.javascript_var1_value)){c.jsplugin_var1_name=g.javascript_var1_name;javascrpt_plugin=true;c.jsplugin_var1_value=evalJavascriptExp(g.javascript_var1_value)}}if(isvalidPlugin(g.javascript_var2_name)){if(isvalidPlugin(g.javascript_var2_value)){c.jsplugin_var2_name=g.javascript_var2_name;javascrpt_plugin=true;c.jsplugin_var2_value=evalJavascriptExp(g.javascript_var2_value)}}if(isvalidPlugin(g.javascript_var3_name)){if(isvalidPlugin(g.javascript_var3_value)){c.jsplugin_var3_name=g.javascript_var3_name;javascrpt_plugin=true;c.jsplugin_var3_value=evalJavascriptExp(g.javascript_var3_value)}}if(isvalidPlugin(g.javascript_var4_name)){if(isvalidPlugin(g.javascript_var4_value)){c.jsplugin_var4_name=g.javascript_var4_name;javascrpt_plugin=true;c.jsplugin_var4_value=evalJavascriptExp(g.javascript_var4_value)}}if(isvalidPlugin(g.javascript_var5_name)){if(isvalidPlugin(g.javascript_var5_value)){c.jsplugin_var5_name=g.javascript_var5_name;javascrpt_plugin=true;c.jsplugin_var5_value=evalJavascriptExp(g.javascript_var5_value)}}if(javascrpt_plugin){e.jsplugin=c}}h.plugins=e}catch(d){return JSON.stringify(h)}return JSON.stringify(h)}function evalJavascriptExp(exp){var jsVarialble=exp;var value="";try{value=eval(jsVarialble);if(value===undefined||value==null){value=getUnknownVisitorInfo()}}catch(err){value=getUnknownVisitorInfo()}return value}function isvalidPlugin(a){if(a.length>0){return true}else{return false}}function initWindow(b){var g=b;if(g){clickdeskLog(g);document.getElementById("broadcastchat").removeAttribute("placeholder");document.getElementById("broadcastchat").value="";for(var c=0;c<g.length;c++){var f=g[c];window.dDate=new Date();if(f.message===undefined){}else{var d=parseInt(f.epoch_time);if(d<10000000000){d*=1000}dDate.setTime(d);var h=dDate.getHours()+":"+dDate.getMinutes();var e=f.from;var a=f.message;if(e=="visitor"){e=CLICKDESK_CHAT_AGENT_NAME}else{e=CLICKDESK_AGENT_NICK_NAME}appendToWindow(a,e,h)}}}}function appendMessage(b,a){appendToWindow(b,a)}function appendToWindow(f,u,c){u=u.slice(0,1).toUpperCase()+u.slice(1);var a="";var g=document.getElementById("clickdesk_session").lastChild;if(g!=null&&a!==undefined){var k=g.firstChild;if(k!=null&&k!==undefined){for(var o=0;o<k.childNodes.length-1;o++){if(k.childNodes[o].id=="cd_name"){a=k.childNodes[o].innerHTML}}}}if(f!==undefined){try{f=convertMessageToClickdeskSmilies1(f)}catch(b){clickdeskLog(b)}if(f.indexOf("http://")!=-1||f.indexOf("https://")!=-1||f.indexOf("www.")!=-1){f=cdMessageToAnchor(f)}}a=a.replace(":","");if(a==u||u==undefined||u=="Srvstaticmsg"){var e=document.getElementById("cd_rewrite").cloneNode(true);e.id="";cdAppendData(e,"cd_rewrite_msg",f);setElementStyleByObject(e,{display:"block"});if(u=="Srvstaticmsg"){setElementStyleByObject(e,{fontStyle:"italic"});document.getElementById("clickdesk_session").appendChild(e)}else{document.getElementById("clickdesk_session").lastChild.appendChild(e)}}else{var h=document.getElementById("clickdesk_new_message").cloneNode(true);var t;var r=new Date();var q;var m;if(c===undefined){q=r.getHours();m=r.getMinutes()}else{q=parseInt(c.substring(0,c.indexOf(":")));m=parseInt(c.substring(c.indexOf(":")+1))}if(parseInt(m)<10){m="0"+m}if(parseInt(q)>=12){t="PM"}else{t="AM"}if(parseInt(q)>12){q=q-12}c=q+":"+m+" "+t;h.id="";for(var o=0;o<h.childNodes.length;o++){var s=h.childNodes[o];for(var n=0;n<s.childNodes.length;n++){if(s.childNodes[n]!==undefined){if(s.childNodes[n].id=="cd_name"){cdAppendText(s.childNodes[n],u+":")}else{if(s.childNodes[n].id=="cd_chat_msg"){cdAppendText(s.childNodes[n],"  "+f+" ")}else{if(s.childNodes[n].id=="cd_date"){cdAppendText(s.childNodes[n],c)}}}}}if(h.childNodes[o].id=="cd_name"){cdAppendText(h.childNodes[o],u+":")}else{if(h.childNodes[o].id=="cd_chat_msg"){cdAppendText(h.childNodes[o],"  "+f+" ")}else{if(h.childNodes[o].id=="cd_date"){cdAppendText(h.childNodes[o],c+"")}}}}h.onmouseover=function(){divHover(h)};h.onmouseout=function(){divOut(h)};h.style.display="block";clickdeskElementWrap("#clickdesk_session")[0].appendChild(h)}var l=clickdeskElementWrap(".ClickDeskChatMessage");for(var o=0;o<l.length;o++){var d=l[o];d.scrollTop=d.scrollHeight}cdSetFocus()}function cdAppendData(d,f,e){if(d!=null&&d!==undefined){for(var b=0;b<d.childNodes.length;b++){var c=d.childNodes[b];for(var a=0;a<c.childNodes.length;a++){if(c.childNodes[a]!==undefined){if(c.childNodes[a].id==f){cdAppendText(c.childNodes[a],e)}}}if(d.childNodes[b].id==f){cdAppendText(d.childNodes[b],e)}}}}function cdAppendText(a,b){if(a!=null&&a!==undefined){a.innerHTML=b}}function cdMessageToAnchor(k){var c=k.split(" ");var h="";if(c.length>0){for(var f=0;f<c.length;f++){var a=c[f];try{a=a.trim();var d=a.split("\n");if(d.length>0){for(var e=0;e<d.length;e++){var g=d[e];if(g.indexOf("http://")==0){h+=" <a href="+g+' target="_blank" class="cd_hyperlink">'+g+"</a>  "}else{if(g.indexOf("https://")==0){h+=" <a href="+g+' target="_blank" class="cd_hyperlink">'+g+"</a>  "}else{if(g.indexOf("www.")==0){h+=" <a href='http://"+g+'\' target="_blank" class="cd_hyperlink">'+g+"</a>  "}else{h+=" "+g}}}}}else{if(a.indexOf("http://")==0){h+=" <a href="+a+' target="_blank" class="cd_hyperlink">'+a+"</a>  "}else{if(a.indexOf("https://")==0){h+=" <a href="+a+' target="_blank" class="cd_hyperlink">'+a+"</a>  "}else{if(a.indexOf("www.")==0){h+=" <a href='http://"+a+'\' target="_blank" class="cd_hyperlink">'+a+"</a>  "}else{h+=" "+a}}}}}catch(b){clickdeskLog(b)}}}return h}function convertMessageToClickdeskSmilies1(f){var e=f;var c=[],b=/[[\]{}()*+?.\\|^$\-,&#\s]/gi;try{for(var a in CLICKDESK_EMOTIONS1){if(CLICKDESK_EMOTIONS1.hasOwnProperty(a)){c.push("("+a.replace(b,"\\$&")+")")}}return f.replace(new RegExp(c.join("|"),"gi"),function(g){g=(g===undefined)?g:g.toUpperCase();return typeof CLICKDESK_EMOTIONS1[g]!="undefined"?'<span class="'+CLICKDESK_EMOTIONS1[g]+'" title="'+CLICKDESK_EMOTIONS1[g].replace("cd-","")+" "+g+'" style="vertical-align: middle;"></span>':g})}catch(d){}return e};