!function(){function a(a){var c,d,e,g,h=document.querySelectorAll(".entry");if("ZemantaPostSettings"in window){if("true"!==ZemantaPostSettings)return;1==h.length?(c=h[0],g=escape(window.entryPermalink),d=r+l(c.id.substr(6),o),b(c,d,g),m=d,f()):a||k()}else{v=!0;for(var i=0,j=h.length;j>i;i+=1){c=h[i];var n=c.querySelector("input[type=hidden][name=zemanta-related]");!n||"true"!=n.getAttribute("value")&&"true"!=n.getAttribute("val")||((e=c.querySelector(".entry-header a"))?g=e.href:(e=c.querySelector(".entry-footer .entry-footer-info a.permalink"))&&(g=e.href),g=escape(g),d=r+l(c.id.substr(6),o),!(d in s)&&q>t&&(t++,b(c,d,g)))}a||k()}}function b(a,b,c){var d=a.querySelector(".entry-header"),f=s[b]={post_id:b,url:c},i={blog_id:o,post_id:b,request_id:window._zem_rp_request_id,post_url:c,title:d?escape(d.innerText):""};window[i.callback=f.callback_name="_zem_callback_"+(f.callback_id=parseInt(1e5*Math.random()))]=f.callback_function=function(b){if(f.response=b,"ok"==b.status){var c=b.data,d=c.settings,g=c.results;if(d&&g&&g.length){if(d.css&&!u){var i=document.createElement("style");i.type="text/css",document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet?i.styleSheet.cssText=d.css:i.innerHTML=d.css,u=!0}var j=f.zem_rp_wrap=document.createElement("div");j.setAttribute("class","zem_rp_wrap"),j.innerHTML='<div class="zem_rp_content"><h3 class="related_post_title">'+d.title+'</h3><ul class="related_post zem_rp"></ul><div class="zem_rp_footer"><a class="zem_rp_backlink" target="_blank" rel="nofollow" href="http://www.zemanta.com/?blogger-related-posts">Zemanta</a></div></div>';for(var k=f.ul=j.querySelector("ul"),l=0,m=g.length;m>l;l++){var n,o=g[l],q="promoted"==o.type,r="network"==o.type,s=document.createElement("li");s.setAttribute("data-position",l);var t="";if(d.display_thumbnails&&o.thumbnail_url&&(t+='<a href="'+o.url+(q?'" rel="nofollow"':'"')+' class="zem_rp_thumbnail"><img src="'+o.thumbnail_url+'" alt="'+o.title+'"></a>'),t+='<a href="'+o.url+(q?'" rel="nofollow"':'"')+' class="zem_rp_title">'+o.title+"</a>",d.display_publish_date&&o.published_date&&(t+=" ("+o.published_date+") "),d.display_post_excerpt&&o.excerpt&&(t+="<br /><small>"+o.excerpt+"...</small>"),s.innerHTML=t,d.display_thumbnails&&o.aid&&(n=s.querySelector("img"),n.onerror=function(a){return function(){this.onerror=function(){};var b=a%p;this.src="http://content.zemanta.com/static/thumbs/"+b+".jpg"}}(o.aid)),q||r){s.className="zem_rp_remote";var v=document.createElement("span");d.display_thumbnails?(v.innerHTML="&nbsp;",v.className="zem_rp_badge",n=n||s.querySelector("img"),n.parentNode.appendChild(v)):(v.style.fontSize="0.8em",v.innerHTML=" (external)",s.querySelector(".zem_rp_title").appendChild(v))}k.appendChild(s)}var w=a.querySelector(".entry-more");null!=w?w.appendChild(j):a.querySelector(".entry-body").appendChild(j),h(k,"mousedown",function(){event=event||window.event;var a=event.target||event.srcElement;("a"===a.nodeName.toLowerCase()||"a"===(a=a.parentNode).nodeName.toLowerCase())&&(a.href=g[a.parentNode.getAttribute("data-position")].target_url)}),h(k,"click",e),h(k,"contextmenu",e)}}};var j=f.script=document.createElement("script");j.src="http://sre.zemanta.com/content/?"+g(i),j.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(j)}function c(){for(var a,b=escape(location.href.split("#")[0]),c=escape(document.referrer);a=x.exec(document.cookie);)if((w||a[1]===c)&&a[2]===b){var d=a[3].split("|"),e="zem_rp_click:"+c+":"+b;return document.cookie=e+"=;path=/;expires="+new Date(0).toUTCString(),{source_post_id:d[0],position:d[1],source_request_id:d[3]}}return!1}function d(){var a=location.href;if(-1===a.indexOf("ref_related_posts="))return!1;for(var b=a.substr(a.indexOf("?")+1).split("&"),c=0,d=b.length;d>c;c++){var e=b[c].split("=");if("ref_related_posts"===e[0])return info=e[1].split("."),{source_blog_id:info[0],source_post_id:info[1],source_request_id:info.length>=3?info[2]:"none",article_id:info.length>=4?info[3]:"none"}}return!1}function e(a){if(!v){a=a||window.event;var b=a.target||a.srcElement;if("a"===b.nodeName.toLowerCase()||"a"===(b=b.parentNode).nodeName.toLowerCase()){var c=location.href.split("#")[0],d=b.href,e=b.parentNode.getAttribute("data-position")||"none",f=m+"|"+e+"|1|"+window._zem_rp_request_id,g="zem_rp_click:"+escape(c)+":"+escape(d);document.cookie=g+"="+f+";path=/;expires="+new Date(n()+1e4).toUTCString()}}}function f(){var a=c(),b=d(),e={post_id:m,blog_id:o,referrer:escape(document.referrer),request_id:window._zem_rp_request_id};a?(e.click="1",e.source_post_id=a.source_post_id,e.position=a.position,e.thumbnails="1",e.source_request_id=a.source_request_id):b?(e.click="1",e.source_blog_id=b.source_blog_id,e.source_post_id=b.source_post_id,e.source_request_id=b.source_request_id,e.article_id=b.article_id):e.click="0",document.createElement("img").setAttribute("src","http://t.zemanta.com/pageview/?"+g(e))}function g(a){var b=[];for(key in a)a.hasOwnProperty(key)&&b.push(key+"="+a[key]);return b.join("&")}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function i(){return document.body?void(y||(y=!0,a(!0))):void setTimeout(i,1)}function j(){if(document.addEventListener)document.removeEventListener("DOMContentLoaded",j,!1);else{if("complete"!==document.readyState)return;document.detachEvent("onreadystatechange",j)}i()}function k(){if(!z)if(z=!0,"complete"===document.readyState)setTimeout(j,1);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",j,!1),window.addEventListener("load",j,!1);else{document.attachEvent("onreadystatechange",j),window.attachEvent("onload",j);var a=!1;try{a=null==window.frameElement&&document.documentElement}catch(b){}a&&a.doScroll&&!function c(){if(!y){try{a.doScroll("left")}catch(b){return setTimeout(c,50)}i()}}()}}function l(a,b){var c,d,e,f,g,h,i,j;for(c=3&a.length,d=a.length-c,e=b,g=3432918353,h=461845907,j=0;d>j;)i=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=(65535&f)+27492+(((f>>>16)+58964&65535)<<16);switch(i=0,c){case 3:i^=(255&a.charCodeAt(j+2))<<16;case 2:i^=(255&a.charCodeAt(j+1))<<8;case 1:i^=255&a.charCodeAt(j),i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e^=a.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,e^=e>>>16,e>>>0}if(document.querySelector){var m,n=function(){return(new Date).getTime()},o=window.ZEMANTA_BLOG_ID=parseInt(window.ZemantaBlogSettings.split("|")[0]);if(o&&!isNaN(o)){window._zem_rp_request_id=window._zem_rp_request_id||"typd"+(n()%60466176/60466176).toString(36).substr(2,5)+Math.random().toString(36).substr(2,2);var p=31,q=5,r="88008800",s=window._zem_rp_articles={},t=0,u=!1,v=!1,w=!!navigator.vendor&&-1!==navigator.vendor.indexOf("Apple"),x=/(?:; |^)zem_rp_click:([^:]*):([^=]*)=([^;]*)/g;window._zem_rp_save_click_event=e;var y=!1,z=!1;a()}}}();
//# sourceMappingURL=recommend.map